function s4(){var randomNumber=Math.floor(65536*(1+Math.random()));return randomNumber.toString(16).substring(1)}function generateGUID(){return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()}function createCookie(name,value,days,domain){var daysTillExpire=1;void 0!==days&&(daysTillExpire=days);var expiryDate=new Date;expiryDate.setTime(expiryDate.getTime()+24*days*3600*1e3);var cookie=name+"="+value+"; expires="+expiryDate.toGMTString()+"; path=/";domain&&(cookie+="; domain="+domain),document.cookie=cookie}function readCookie(name){for(var cookieArray=document.cookie.split(";"),i=0;i<cookieArray.length;i++){var cookie=cookieArray[i];if(cookie=cookie.trim(),0===cookie.indexOf(name))return cookie.substring(name.length+1,cookie.length)}return null}function whichEdge(){return readCookie("lecdn")}function sendLinkRequest(session_id,domain){var linkedCookie=readCookie("uniform_id_linked");if(null===linkedCookie){var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){xhr.readyState===XMLHttpRequest.DONE&&204===xhr.status&&createCookie("uniform_id_linked","linked",365,domain)},xhr.open("POST","https://t.freelancer.com/link"),xhr.withCredentials=!0,xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhr.send("tracking_session_id="+session_id)}}function Tracking(image,accountID,defaults,domain){this.account_id=accountID,this.image=image,this._tracking_images=[],this._debug=!1,this.session_id=null,this.defaults={},null!==defaults&&(this.defaults=defaults),this.domain=domain,this.init_session()}Tracking.prototype.replace_defaults=function(newDefaults){this.defaults=newDefaults},Tracking.prototype.init_session=function(){return this.session_id||(this.session_id=readCookie("_tracking_session")),this.session_id||(this.session_id=generateGUID(),createCookie("_tracking_session",this.session_id,365,this.domain)),sendLinkRequest(this.session_id,this.domain),this},Tracking.prototype.log=function(){for(var messages=[],i=0;i<arguments.length;i++)messages.push(arguments[i]);return this._debug&&alert.apply(null,messages),window.console&&window.console.log&&console.log(messages.join(" ")),this},Tracking.prototype._load_image=function(url){var image=document.createElement("img");image.style.display="none",image.src=url,this._tracking_images.push(image),document.body.appendChild(image)},Tracking.prototype.last_image=function(){return 0===this._tracking_images.length?null:this._tracking_images[this._tracking_images.length-1].src},Tracking.prototype.start_keepalive=function(pageID){var me=this;trackKeepAlive=function(){me.push(["_keepalive",{page_id:pageID}])},window.setInterval(trackKeepAlive,5e3)},Tracking.prototype.push=function(event){var eventName=event[0],params=[];return event.length>=2&&(params=event.slice(1)),"string"==typeof eventName||eventName instanceof String?""===eventName?(this.log("Event name is empty"),this):"_replace_defaults"===eventName?(this.replace_defaults(params[0]),this):"keepalive"===eventName?(this.start_keepalive(generateGUID()),this):(kvs={},1===params.length&&(kvs=params[0]),kvs.page=window.location.pathname,kvs.location=""+window.location,kvs.title=document.title,kvs.edge=whichEdge(),this.track(eventName,kvs),1):(this.log("Invalid event name pushed - "+eventName),this)},Tracking.prototype.init=function(arr){var events=arr;if(null!==events&&void 0!==events)for(var i=0;i<events.length;i++){var event=events[i];this.push(event)}return this},Tracking.prototype.track=function(eventName,keyValues){var date=new Date,t=""+date.getTime()+Math.random(),fragments=[];fragments.push("acct="+this.account_id),fragments.push("t="+t),fragments.push("en="+eventName);for(var key in keyValues)keyValues.hasOwnProperty(key)&&(value=keyValues[key],fragments.push(key+"="+encodeURIComponent(value)));var defaults=this.defaults;for(key in defaults)defaults.hasOwnProperty(key)&&(value=defaults[key],fragments.push(key+"="+encodeURIComponent(value)));fragments.push("session_id="+this.session_id),url=this.image+"?"+fragments.join("&"),this._load_image(url)},Tracking.prototype.tracked_count=function(){return this._tracking_images.length},Tracking._guid=generateGUID,window.Tracking=Tracking;
//# sourceMappingURL=js/main.min.map