(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"+qCR":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},"/3EI":function(t,e,n){"use strict";var i=n("CcnG"),r=n("iXb4"),a=n("bse0");n("h5VB"),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return o});var s=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;flex:1 1 100%;flex-direction:column;margin:0 -8px}.ScrollbarContent[_ngcontent-%COMP%]{display:flex;flex:1 1 0;flex-direction:column;height:auto;min-height:0;padding:0 8px}"]],data:{}});function o(t){return i["\u0275vid"](2,[(t()(),i["\u0275eld"](0,0,null,null,2,"perfect-scrollbar",[["class","ScrollbarContent"]],[[2,"ps-show-limits",null],[2,"ps-show-active",null]],null,null,r.b,r.a)),i["\u0275did"](1,507904,null,0,a.b,[i.NgZone,i.ChangeDetectorRef,i.PLATFORM_ID],{config:[0,"config"]},null),i["\u0275ncd"](0,0)],function(t,e){t(e,1,0,i["\u0275EMPTY_MAP"])},function(t,e){t(e,0,0,i["\u0275nov"](e,1).autoPropagation,i["\u0275nov"](e,1).scrollIndicators)})}},"/joU":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("tVL2"),r=n("L2ky");function a(){return{defaultOrder:{field:"id",direction:i.c.ASC},fetch:function(t,e,n){return{endpoint:"projects/0.1/milestone_requests",params:{bids:Object(i.k)(n,"bidId"),projects:Object(i.k)(n,"projectId"),statuses:Object(i.k)(n,"status"),bidders:Object(i.k)(n,"bidderId"),milestone_requests:Object(i.k)(n,"id")}}},push:function(t,e){return{endpoint:"projects/0.1/milestone_requests",payload:{project_id:e.projectId,bid_id:e.bidId,description:e.description,amount:e.amount}}},update:function(t,e,n){var i,r,a="PUT",s=!1,o=!1;if(n.projectId&&n.bidId&&e.description&&e.amount){if(i)throw new Error("Cannot update two requests at once");r="payment/onRequestMilestone.php",i={projectId:n.projectId,bidId:n.bidId,id:n.id,description:e.description,amount:e.amount},a="POST",s=!0,o=!0}if(e.action){if(i)throw new Error("Cannot update two requests at once");r="projects/0.1/milestone_requests/"+n.id,i={action:e.action},a="PUT"}if(void 0===i||void 0===r||void 0===s||void 0===o)throw new Error("Could not update due to missing field(s)");return{asFormData:o,payload:i,endpoint:r,method:a,isGaf:s}},remove:function(t,e,n){return{payload:{action:r.a.DELETE},endpoint:"projects/0.1/milestone_requests/"+e,method:"PUT"}}}}},"0cOc":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("tVL2");function r(){return{defaultOrder:{field:"id",direction:i.c.DESC},fetch:function(t,e,n){return{endpoint:"contests/0.1/contests",params:{contests:(e||[]).map(i.x).concat(Object(i.k)(n,"id")),owners:Object(i.k)(n,"ownerId"),statuses:Object(i.k)(n,"status"),entry_counts:"true"}}},push:function(t,e){return{endpoint:"contests/0.1/contests/",payload:{owner_id:e.ownerId,currency_id:e.currency.id,job_ids:e.jobs.map(function(t){return t.id}),title:e.title,prize:e.prize,description:e.description,duration:e.duration,type:e.type,upgrades:e.upgrades?(n=e.upgrades,{featured:n.featured,sealed:n.sealed,topcontest:n.topContest,highlighted:n.highlight,urgent:n.urgent,nonpublic:n.private,nda:n.nda}):{},draft:e.draft,file_ids:e.fileIds?e.fileIds:[]}};var n}}}},"1sHd":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("CcnG"),r=n("aa9U"),a=function(){function t(){this.ButtonColor=r.a,this.confirm=new i.EventEmitter,this.cancel=new i.EventEmitter}return t.prototype.handleBackButton=function(){this.cancel.emit()},t.prototype.handleConfirmButton=function(){this.confirm.emit()},t}()},"2H+Z":function(t,e,n){"use strict";var i=n("CcnG");n("+qCR"),n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a});var r=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{border-top:1px solid #dedede;display:flex;flex:0 0 auto;margin:auto -8px -8px;padding:8px}"]],data:{}});function a(t){return i["\u0275vid"](2,[i["\u0275ncd"](null,0)],null,null)}},"3azl":function(t,e,n){"use strict";var i=n("tVL2"),r=n("ZW3o"),a=n("Mb2v"),s=function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function o(t){return s({},Object(r.b)(t),{jobs:Object(i.l)(t.jobs)?t.jobs.map(function(t){return Object(a.a)(t)}):[]})}function c(t,e){switch(void 0===t&&(t={}),e.type){case"API_FETCH_SUCCESS":if("threadProjects"===e.payload.type){var n=e.payload,r=n.result,a=n.ref,s=n.order;return r.projects?Object(i.q)(t,Object(i.y)(r.projects,o),s,a):t}if("threads"===e.payload.type){var c=e.payload.result.context_details;return c&&c.projects?(a=e.payload.ref,Object(i.r)(t,Object(i.y)(c.projects,o),{path:{collection:"threadProjects",authUid:a.path.authUid}})):t}return t;default:return t}}n.d(e,"a",function(){return c})},"4pWq":function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n("f2/7"),r=n("vYTZ"),a=n("5I7X"),s=n("kGt0"),o=n("I2Cp"),c=n("iRZu"),u=n("n9BS"),d=function(){function t(t,e){this.modalService=t,this.tracking=e,this.Margin=s.a,this.IconColor=r.c,this.IconSize=r.d,this.ImageAttachmentThumbnailHeight=u.a,this.ImageAttachmentThumbnailWidth=u.b,this.HoverColor=r.a,this.LinkColor=a.a,this.LinkHoverColor=a.b,this.ModalSize=o.a,this.chatBoxMode=!0,this.isWhitelistUser=!1,this.isImage=!1}return t.prototype.ngOnInit=function(){this.isImage=Object(i.c)(this.attachment),this.attachmentPath=Object(u.c)(this.messageId,this.attachment),this.trackingSection=this.chatBoxMode?"chatbox":"inbox",this.imageThumbnailPath=Object(u.d)(this.messageId,this.attachment,{height:u.a.CHAT_MESSAGE,width:u.b.CHAT_MESSAGE,method:"fit"})},t.prototype.openPreviewModal=function(){var t=this;/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?window.location.href=this.attachmentPath:this.modalService.open(c.a,{inputs:{filepath:this.attachmentPath,filename:this.attachment,filetype:Object(i.b)(this.attachment)},edgeToEdge:!0,size:o.a.XLARGE}).afterClosed().toPromise().then(function(){t.tracking.track("user_action",{section:"messaging_image_viewer",subsection:"header",label:"close_image_viewer"})})},t}()},"69hX":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("tVL2"),r=n("kjwh");function a(t,e){switch(void 0===t&&(t={}),e.type){case"WS_MESSAGE":if("onlineoffline"===e.payload.parent_type&&"statusget"===e.payload.type){var n=e.payload,a=n.toUserId,s=n.data;return Object(i.r)(t,Object(i.y)(Object.entries(s),r.b),{path:{collection:"onlineOffline",authUid:a}})}if("onlineoffline"===e.payload.parent_type&&"statuschange"===e.payload.type){var o=e.payload;return s=o.data,a=o.toUserId,Object(i.r)(t,Object(i.y)([s],r.a),{path:{collection:"onlineOffline",authUid:a}})}return t;default:return t}}},"6gso":function(t,e,n){"use strict";var i=n("CcnG");n("LU0i"),n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a});var r=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{font-size:16px;line-height:1.5;color:#1f2836;font-weight:700;margin-bottom:8px}"]],data:{}});function a(t){return i["\u0275vid"](2,[i["\u0275ncd"](null,0)],null,null)}},"7A1k":function(t,e,n){"use strict";n.d(e,"a",function(){return v});var i=n("CcnG"),r=n("rMUQ"),a=n("GDxn"),s=n("67Y/"),o=n("/PH2"),c=n("VnD/"),u=n("ad02"),d=n("15JJ"),l=n("s4kO"),h=n("yGWI"),p=n("p0Sj"),f=n("xMyE"),m=n("t9fZ"),b=n("b6KT"),g=function(){return(g=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},v=function(){function t(t,e,n,r,a,s,o){this.auth=t,this.datastore=e,this.webSocketService=n,this.soundService=r,this.changeDetectorRef=a,this.messagingChat=s,this.localStorage=o,this.adminChatsOnly=!1,this.makingCall=new i.EventEmitter,this.chats=[],this.errors={},this.getTeamFromChat=b.d}return t.prototype.onResize=function(){this.updateChatOverflow()},t.prototype.beforeUnload=function(){this.saveChats(this.chats)},t.prototype.ngOnInit=function(){var t=this;this.currentUserId$=this.auth.getUserId(),this.messagingChat.registerLiveChat(function(e){return t.startChat(e)}),Object(b.b)(this.localStorage),this.currentUserIdSubscription=this.currentUserId$.subscribe(function(e){Object(b.k)(e),t.currentUserIdValue=e}),this.currentUserDoc=this.datastore.document("users",this.currentUserId$),Object(b.k)(this.currentUserIdValue),this.loadChats(),this.updateChatOverflow();var e=this.datastore.collection("notificationsPreferences").valueChanges().pipe(Object(s.a)(function(t){var e=t.filter(function(t){return"messages"===t.notificationType&&"chat_sound"===t.channel});return e.length>0&&e[0].enabled}));this.messageNotifySubscription=this.webSocketService.fromServerStream$.pipe(Object(o.a)(this.currentUserId$,e),Object(c.a)(function(e){var n=e[0],i=e[1];if(e[2]&&Object(r.isWebsocketMessage)(n)&&"messages"===n.body.parent_type&&"private"===n.body.type&&n.body.data.from_user.toString()!==i&&!t.isHiddenThread(n.body.data.thread_details.thread_type)){var a=n.body.data.thread_id,s=t.chats.find(function(t){return t.threadIdentifier.id===a});return void 0!==s&&(2===s.focus||0===s.focus)}return!1})).subscribe(function(){return t.soundService.handleNotification("message")}),this.contacts$=this.currentUserDoc.valueChanges().pipe(Object(s.a)(b.g),Object(u.a)(),Object(d.a)(function(e){return e?a.a:t.datastore.collection("contacts").valueChanges()}),Object(r.startWithEmptyList)(),Object(l.a)(1),Object(h.a)()),this.teams$=this.datastore.collection("teams",function(e){return e.where("members","includes",t.currentUserId$.pipe(Object(s.a)(function(t){return Object(r.toNumber)(t)})))}).valueChanges().pipe(Object(r.asObject)(),Object(p.a)({})),this.clickedOutsideSubscription=this.clickedOutside$.subscribe(function(e){e&&t.blur()})},t.prototype.blur=function(t){this.chats=this.chats.map(function(e){return g({},e,{focus:t&&e===t?e.focus:2})})},t.prototype.onResizeEnd=function(t,e){if(void 0!==t.rectangle.width&&void 0!==t.rectangle.height){var n=Object(b.h)(t.rectangle);if(this.chats){this.blur();var i=this.chats.findIndex(function(t){return Object(b.j)(t.threadIdentifier,e.threadIdentifier)});i>=0&&(this.chats=this.getUpdatedChats(i,g({},this.chats[i],{height:n.height,width:n.width,focus:1,lastUpdate:Date.now()})),this.saveChats(this.chats),this.updateChatOverflow())}}},t.prototype.validateResize=function(t){return void 0!==t.rectangle.width&&void 0!==t.rectangle.height&&Object(b.l)({width:t.rectangle.width,height:t.rectangle.height})},t.prototype.startChat=function(t){var e=t.threadType,n=t.context,i=void 0===n?{type:"none"}:n,r=t.threadId,a=t.focus,s=Array.from(new Set(t.userIds.concat([Number(this.currentUserIdValue)])));if(!(s.length<2)||r){var o=r||Math.floor(Math.random()*Number.MIN_SAFE_INTEGER),c={id:o,threadType:e,context:i,members:s,isFake:o<0},u=this.chats.find(function(t){return Object(b.j)(c,t.threadIdentifier)});if(void 0===u)a&&this.blur(),this.chats=[this.createChatAttributes(c,a)].concat(this.chats),this.changeDetectorRef.markForCheck();else{var d=this.chats.indexOf(u);d>=0&&(a&&this.blur(u),this.chats=this.getUpdatedChats(d,g({},u,{focus:a?1:u.focus,minimised:!a&&u.minimised,lastUpdate:Date.now()})))}this.updateChatOverflow(),this.saveChats(this.chats)}},t.prototype.createChatAttributes=function(t,e,n,i,r){var a=this;void 0===e&&(e=!0),void 0===n&&(n=280),void 0===i&&(i=-1),void 0===r&&(r=!1);var o=t.members.length>0?t.members.filter(function(t){return t!==Number(a.currentUserIdValue)}):[],u=Date.now(),d={context:t.context,folder:"inbox",id:t.id,inactiveMembers:[],isFake:t.isFake,isMuted:!1,isBlocked:!1,isRead:!0,members:t.members,messageUnreadCount:0,otherMembers:o,owner:Number(this.currentUserIdValue),threadType:t.threadType,timeCreated:u,timeRead:u,timeUpdated:u,userReadTimes:{},writePrivacy:"members"},m=this.datastore.collection("threads",t.id>0?function(e){return e.where("id","==",t.id)}:function(e){return e.where("otherMembers","==",o).where("context","==",t.context).where("threadType","in",[t.threadType])}),g=m.valueChanges().pipe(Object(c.a)(function(t){return t&&0!==t.length}),Object(f.a)(function(e){e.length>1&&console.warn("More than 1 thread returned for user "+a.currentUserIdValue,t)}),Object(s.a)(function(t){return t[0]}),Object(f.a)(function(t){a.updateThreadIdentifier(Object(b.a)(t))}),Object(p.a)(d),Object(l.a)(1),Object(h.a)());return{minimised:r,focus:e?1:2,width:n,height:i,lastUpdate:Date.now(),visible:!0,threadCollection:m,thread$:g,threadIdentifier:t}},t.prototype.focusLastUpdatedChatbox=function(){var t=this,e=this.chats.reduce(function(e,n,i){return n.visible&&!n.minimised&&(!t.chats[e]||n.lastUpdate>t.chats[e].lastUpdate)?i:e},-1);e>=0&&(this.chats=this.getUpdatedChats(e,g({},this.chats[e],{focus:1})))},t.prototype.closeChat=function(t){var e=this.chats.findIndex(function(e){return Object(b.j)(e.threadIdentifier,t)});if(-1!==e){var n=2!==this.chats[e].focus;this.chats=this.chats.filter(function(e){return!Object(b.j)(e.threadIdentifier,t)}),this.updateChatOverflow(),n&&this.focusLastUpdatedChatbox(),this.saveChats(this.chats)}},t.prototype.minimiseChat=function(t){var e=this.chats.findIndex(function(e){return Object(b.j)(e.threadIdentifier,t)});e>=0&&(this.chats=this.getUpdatedChats(e,g({},this.chats[e],{minimised:!this.chats[e].minimised})),this.saveChats(this.chats))},t.prototype.passMakingCallState=function(t){this.makingCall.emit(t)},t.prototype.updateThreadIdentifier=function(t){var e=this.chats.findIndex(function(e){return Object(b.j)(e.threadIdentifier,t)});if(!(e<0)){var n=this.chats[e];t.id===n.threadIdentifier.id&&t.isFake===n.threadIdentifier.isFake&&Object(r.arrayIsShallowEqual)(t.members,n.threadIdentifier.members)||(this.chats=this.getUpdatedChats(e,g({},n,{threadIdentifier:g({},t)})))}},t.prototype.ngOnDestroy=function(){this.currentUserIdSubscription&&this.currentUserIdSubscription.unsubscribe(),this.webSocketSubscription&&this.webSocketSubscription.unsubscribe(),this.messageNotifySubscription.unsubscribe(),this.clickedOutsideSubscription.unsubscribe()},t.prototype.focusClick=function(t){this.chats=this.chats.map(function(e){return function(e){return Object(b.j)(e.threadIdentifier,t)}(e)?g({},e,{focus:1,lastUpdate:Date.now()}):g({},e,{focus:2})})},t.prototype.identifyChat=function(t,e){if("group"===e.threadIdentifier.threadType)return e.threadIdentifier.id.toString();var n="["+e.threadIdentifier.members.slice().sort().toString()+"]";return"none"===e.threadIdentifier.context.type?e.threadIdentifier.threadType+":"+n:e.threadIdentifier.threadType+":"+e.threadIdentifier.context.type+":"+e.threadIdentifier.context.id+":"+n},t.prototype.updateChatOverflow=function(){var t=this,e=this.chats.filter(function(e){return!t.isHiddenThread(e.threadIdentifier.threadType)&&2===e.focus}).sort(function(t,e){return e.lastUpdate-t.lastUpdate}),n=this.chats.findIndex(function(e){return!t.isHiddenThread(e.threadIdentifier.threadType)&&2!==e.focus});-1!==n&&e.unshift(this.chats[n]);var i=210,a=e.map(function(t){return(i+=t.width+8)<window.innerWidth?t.threadIdentifier.id:void 0}).filter(r.isDefined);this.chats=this.chats.map(function(t){return g({},t,{visible:a.includes(t.threadIdentifier.id)})})},t.prototype.getUpdatedChats=function(t,e){return t<0||t>this.chats.length-1?this.chats:(this.changeDetectorRef.markForCheck(),this.chats.slice(0,t).concat([e],this.chats.slice(t+1,this.chats.length)))},t.prototype.isHiddenThread=function(t){return this.adminChatsOnly&&"admin_preferred_chat"!==t&&"support_chat"!==t},t.prototype.saveChats=function(t){var e=t.map(function(t){return{minimised:t.minimised,focus:t.focus,width:t.width,height:t.height,threadIdentifier:t.threadIdentifier}});this.localStorage.set("webappChats",e)},t.prototype.loadChats=function(){var t=this;this.localStorage.getObservable("webappChats").pipe(Object(m.a)(1)).toPromise().then(function(e){t.chats=e?e.filter(function(t){return!t.threadIdentifier.isFake}).map(function(e){return t.createChatAttributes(e.threadIdentifier,!1,e.width,e.height,e.minimised)}):[],t.changeDetectorRef.markForCheck()})},t}()},"7Qkd":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("CcnG"),r=n("vYTZ"),a=n("kGt0"),s=function(){function t(t){this.changeDetectorRef=t,this.Margin=a.a,this.IconColor=r.c,this.IconSize=r.d,this.HoverColor=r.a,this.userSelected=new i.EventEmitter,this.expanded=!0}return t.prototype.handleExpand=function(){this.expanded=!this.expanded,this.changeDetectorRef.markForCheck()},t.prototype.handleClick=function(t){this.userSelected.emit(t)},t.prototype.trackByUserId=function(t){return t.id},t}()},"7TTF":function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n("CcnG"),r=n("aa9U"),a=n("vYTZ"),s=n("kGt0"),o=n("vUsZ"),c=n("67Y/"),u=n("t9fZ"),d=n("grJo"),l=n("Vug6"),h=n("Loon"),p=n("Z8sc"),f=function(){function t(t,e){this.localStorage=t,this.changeDetectorRef=e,this.Margin=s.a,this.ButtonColor=r.a,this.ButtonSize=r.c,this.IconSize=a.d,this.FontType=o.d,this.closeOverlay=new i.EventEmitter,this.steps=[l.a,p.a,d.a,h.a]}return t.prototype.ngOnInit=function(){var t=this;this.showFullFlow$=this.localStorage.getObservable("projectOverlayFullFlowComplete").pipe(Object(c.a)(function(t){return!0!==t})),this.showFullFlow$.pipe(Object(u.a)(1)).toPromise().then(function(e){t.currentStep=e?0:Math.floor(Math.random()*(t.steps.length-1)+1),t.changeDetectorRef.markForCheck()})},t.prototype.handleBackClicked=function(){void 0===this.currentStep||this.isAtStart()||(this.currentStep--,this.changeDetectorRef.markForCheck())},t.prototype.handleNextClicked=function(){void 0===this.currentStep||this.isAtEnd()||(this.currentStep++,this.changeDetectorRef.markForCheck())},t.prototype.handleEndClicked=function(){var t=this;this.localStorage.getObservable("projectOverlayThreadComplete").pipe(Object(u.a)(1)).toPromise().then(function(e){var n=e||{};n[t.thread.id]=!0,t.localStorage.set("projectOverlayThreadComplete",n)}),this.localStorage.set("projectOverlayFullFlowComplete",!0),this.closeOverlay.emit()},t.prototype.isAtStart=function(){return void 0!==this.currentStep&&0===this.currentStep},t.prototype.isAtEnd=function(){return void 0!==this.currentStep&&this.currentStep>=this.steps.length-1},t}()},"9N8w":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("CcnG"),r=n("vYTZ"),a=function(){function t(){this.IconColor=r.c,this.IconSize=r.d,this.HoverColor=r.a,this.close=new i.EventEmitter}return t.prototype.closeErrorAlert=function(){this.close.emit()},t}()},A2Pa:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("CcnG"),r=n("gIcY"),a=n("vYTZ"),s=n("pTqS"),o=n("kGt0"),c=n("vUsZ"),u=function(){function t(){this.Margin=o.a,this.IconColor=a.c,this.IconSize=a.d,this.FontColor=c.a,this.FontSize=c.b,this.FontType=c.d,this.ListItemType=s.c,this.ListItemPadding=s.b,this.chatBoxMode=!0,this.archiveChatToggle=new i.EventEmitter,this.muteChatToggle=new i.EventEmitter,this.blockChatToggle=new i.EventEmitter,this.formGroup=new r.i({archive:new r.g,mute:new r.g,block:new r.g})}return t.prototype.ngOnInit=function(){this.formGroup.controls.archive.setValue("archived"===this.thread.folder),this.formGroup.controls.mute.setValue(this.thread.isMuted),this.formGroup.controls.block.setValue(this.thread.isBlocked)},t.prototype.ngOnChanges=function(t){t.thread&&t.thread.previousValue&&(t.thread.previousValue.folder!==this.thread.folder&&(this.formGroup.controls.archive.setValue("archived"===this.thread.folder),this.formGroup.controls.archive.enable()),t.thread.previousValue.isMuted!==this.thread.isMuted&&(this.formGroup.controls.mute.setValue(this.thread.isMuted),this.formGroup.controls.mute.enable()),t.thread.previousValue.isBlocked!==this.thread.isBlocked&&(this.formGroup.controls.block.setValue(this.thread.isBlocked),this.formGroup.controls.block.enable()))},t.prototype.handleArchiveClick=function(){this.formGroup.controls.archive.enabled&&(this.formGroup.controls.archive.disable(),this.archiveChatToggle.emit(!0))},t.prototype.handleMuteClick=function(){this.formGroup.controls.mute.enabled&&(this.formGroup.controls.mute.disable(),this.muteChatToggle.emit(!0))},t.prototype.handleBlockClick=function(){this.formGroup.controls.block.enabled&&(this.formGroup.controls.block.disable(),this.blockChatToggle.emit(!0))},t.prototype.inboxRedirect=function(){if(this.thread.isFake){var t=new URL(window.location.origin+"/messages/new"),e=t.searchParams,n=this.thread,i=n.members,r=n.context;e.append("thread_type",n.threadType),e.append("context_type",r.type),"none"!==r.type&&e.append("context_id",r.id.toString()),i.forEach(function(t){e.append("members",t.toString())}),window.open(t.href)}window.open("/messages/thread/"+this.thread.id)},t}()},"ARW/":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("tVL2"),r=n("AEwi"),a=n("uwYy"),s=function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function o(t,e){switch(void 0===t&&(t={}),e.type){case"API_FETCH_SUCCESS":if("messages"===e.payload.type){var n=e.payload,o=n.result,c=n.ref,u=n.order;return Object(i.q)(t,Object(i.y)(o.messages,a.a),u,c)}return t;case"API_PUSH_SUCCESS":if("messages"===e.payload.type){var d=e.payload,l=d.result;return c=d.ref,Object(i.r)(t,Object(i.y)([l],a.a),c)}return t;case"WS_MESSAGE":var h=e.payload;if("messages"===h.parent_type&&"private"===h.type)return c={path:{collection:"messages",authUid:h.toUserId}},Object(i.r)(t,Object(i.y)([h],a.b),c);if("messages"===h.parent_type&&"attach"===h.type){var p={collection:"messages",authUid:h.toUserId},f=h.data.message_id;return c={path:p},Object(i.r)(t,Object(i.y)([h.data.thread_id],function(e){var n=Object(i.u)(t,p,f);return n?s({},n,{attachments:(n.attachments||[]).concat(h.data.filenames)}):{id:h.data.message_id,attachments:h.data.filenames,fromUser:h.data.from_user,message:"",messageSource:"chat_box",threadId:h.data.thread_id,timeCreated:h.timestamp,sendStatus:r.a.SENT}}),c)}return t;default:return t}}},B5lz:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},BFOf:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return l});var i,r=n("CcnG"),a=n("gIcY"),s=n("vYTZ"),o=n("vUsZ"),c=n("bne5"),u=n("p0Sj"),d=n("67Y/");!function(t){t.DRAGDROP="dragdrop",t.ICON="icon"}(i||(i={}));var l=function(){function t(t){this.cd=t,this.FileSelectMode=i,this.HoverColor=s.a,this.IconColor=s.c,this.IconSize=s.d,this.FontColor=o.a,this.FontSize=o.b,this.fileHover=!1,this.contentProvided=!1,this.iconColor=s.c.DARK,this.fileSelectMode=i.DRAGDROP,this.control=new a.g,this.multiple=!1,this.onFileDropped=new r.EventEmitter}return Object.defineProperty(t.prototype,"active",{set:function(t){console.warn("Manually setting active status on fl-file-select is deprecated.\n      Set the disabled status on your form control instead"),t?this.control.enable():this.control.disable()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.asIcon=this.fileSelectMode===i.ICON,this.contentProvided=!!(this.content.nativeElement.children.length>0),this.errorSubscription=this.control.statusChanges.pipe(Object(u.a)(this.control.status)).subscribe(function(){t.error=Object.values(t.control.errors||{})[0],t.cd.markForCheck()})},t.prototype.onDragOver=function(t){this.control.disabled||(this.fileHover=!0,t.preventDefault())},t.prototype.onDragLeave=function(){this.control.disabled||(this.fileHover=!1)},t.prototype.onDrop=function(t){this.control.disabled||(t.preventDefault(),t.stopPropagation(),t.dataTransfer&&this.onFileSelect(t.dataTransfer.files),this.fileHover=!1)},t.prototype.onMouseOver=function(t){this.iconColor=t?s.c.PRIMARY:s.c.DARK},t.prototype.onFileSelect=function(t){var e=this;if(t){var n=Array.from(t);this.control.setValue(n),this.control.markAsDirty(),n.forEach(function(t){e.onFileDropped.emit(t)})}},t.prototype.ngOnDestroy=function(){this.errorSubscription.unsubscribe()},t.prototype.triggerInput=function(){this.nativeElement.nativeElement.click()},t.prototype.handleClick=function(){this.nativeElement.nativeElement.value=""},t.prototype.readFileAsDataURL=function(t){var e=new FileReader;return e.readAsDataURL(t),c.a(e,"load").pipe(Object(d.a)(function(){return e.result}))},t}()},CAys:function(t,e,n){"use strict";var i=n("CcnG");n("vwlU"),n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a});var r=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;flex:1 0 1px}[_nghost-%COMP%]:not(:last-child){margin-right:12px}"]],data:{}});function a(t){return i["\u0275vid"](2,[i["\u0275ncd"](null,0)],null,null)}},DGvs:function(t,e,n){"use strict";function i(t,e,n){"NoCall"!==t&&window.open("/users/messages/videochat.php?audioOnly="+("Audio"===t)+"&threadId="+e+"&accepting="+n,"Freelancer Videochat","width="+("Video"===t?880:400)+",height=575")}n.d(e,"a",function(){return i})},DIEf:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("CcnG"),r=n("vYTZ"),a=n("Kc2S"),s=function(){function t(){this.IconColor=r.c,this.IconSize=r.d,this.InputSize=a.a,this.keyEnter=new i.EventEmitter}return t.prototype.handleInputKeypress=function(t){(t.key&&"enter"===t.key.toLowerCase()||13===(t.which||t.keyCode||t.charCode))&&this.keyEnter.emit()},t}()},DMbs:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("tVL2");function r(){return{defaultOrder:{field:"id",direction:i.c.DESC},fetch:function(t,e,n){return{endpoint:"users/0.1/users",params:{support_status_details:"true",online_offline_details:"true",avatar:"true",users:(e||[]).map(i.x).concat(Object(i.k)(n,"id")),usernames:Object(i.k)(n,"username")}}}}}},"Eg4/":function(t,e,n){"use strict";n.d(e,"a",function(){return b});var i=n("CcnG"),r=n("gIcY"),a=n("rMUQ"),s=n("aa9U"),o=n("kGt0"),c=n("p0Sj"),u=n("s4kO"),d=n("yGWI"),l=n("ad02"),h=n("VnD/"),p=n("67Y/"),f=n("xMyE"),m=n("9Z1F"),b=function(){function t(t){this.datastore=t,this.Margin=o.a,this.ButtonColor=s.a,this.closeView=new i.EventEmitter,this.addUsers=new i.EventEmitter,this.searchFormControl=new r.g,this.searchStatus="Press Enter to search for users by username.",this.selectedUsers=new Set}return t.prototype.handleCloseView=function(){this.closeView.emit()},t.prototype.ngOnInit=function(){var t=this;this.searchText$=this.searchFormControl.valueChanges.pipe(Object(c.a)(""),Object(u.a)(1),Object(d.a)(),Object(l.a)()),this.candidateTeamMembers$=this.datastore.objects("threadUsers",this.team?this.team.members.filter(function(e){return!t.thread.members.includes(e)}):[]).pipe(Object(a.startWithEmptyList)()),this.candidateUserSearch$=this.datastore.collection("threadUsers",function(e){return e.limit(1).where("username","equalsIgnoreCase",t.searchComponent.keyEnter.pipe(Object(h.a)(function(){return t.isRecruiter}),Object(p.a)(function(){return t.searchFormControl.value}),Object(h.a)(function(t){return""!==t}),Object(l.a)(),Object(f.a)(function(){t.searchStatus="Searching..."})))}).valueChanges().pipe(Object(f.a)(function(e){t.searchStatus=e.length>0?"Press Enter to search for users by username.":"No user found."}),Object(m.a)(function(e,n){return t.searchStatus="Something went wrong while searching for this user.",n}),Object(a.startWithEmptyList)())},t.prototype.handleAdd=function(){if(this.selectedUsers.size>0){var t=Array.from(this.selectedUsers.values()).map(function(t){return t.id});this.addUsers.emit(t),this.candidateGroupListComponent.resetSelectedUsers()}},t.prototype.modifyMembers=function(t){this.selectedUsers=t},t}()},FIsL:function(t,e,n){"use strict";var i=n("tVL2"),r=n("ZqFd");function a(t){if(!t.project_id)throw Error("Milestone request doesn't have a project ID.");if(!t.bidder_id||!t.bid_id||!t.amount)throw Error("Milestone request is missing a required field.");return{id:t.id||Math.random(),bidderId:t.bidder_id,bidId:t.bid_id,timeRequested:t.time_requested?1e3*t.time_requested:void 0,amount:t.amount,projectOwnerId:t.project_owner_id,projectId:t.project_id,description:t.description,currency:t.currency?Object(r.a)(t.currency):void 0,status:t.status}}function s(t){return{id:Object(i.x)(t.data.requestId),bidderId:Object(i.x)(t.data.sellerId),bidId:Object(i.x)(t.data.bidId),timeRequested:1e3*t.timestamp,amount:Object(i.x)(t.data.amount),projectOwnerId:Object(i.x)(t.data.accountId),projectId:Object(i.x)(t.data.id),description:t.data.description,currency:{code:t.data.currencyCode,id:Object(i.x)(t.data.currencyId),sign:t.data.currencySign},status:"pending"}}n.d(e,"a",function(){return c});var o=function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function c(t,e){switch(void 0===t&&(t={}),e.type){case"API_FETCH_SUCCESS":if("milestoneRequests"===e.payload.type){var n=e.payload,r=n.result,c=n.ref,u=n.order;return Object(i.q)(t,Object(i.y)(r.milestone_requests,a),u,c)}return t;case"API_UPDATE_SUCCESS":if("milestoneRequests"===e.payload.type){var d=e.payload,l=d.delta,h=d.originalObject;return c=d.ref,Object(i.B)(t,[h.id],function(t){return Object(i.h)(t,l)},c)}return t;case"API_PUSH_SUCCESS":if("milestoneRequests"===e.payload.type){var p=e.payload;return c=p.ref,r=p.result,Object(i.r)(t,Object(i.y)([r],a),c)}return t;case"API_DELETE_SUCCESS":if("milestoneRequests"===e.payload.type){var f=e.payload;return h=f.originalObject,c=f.ref,Object(i.v)(c,t,h.id)}return t;case"WS_MESSAGE":if("notifications"===e.payload.parent_type)switch(c={path:{collection:"milestoneRequests",authUid:e.payload.toUserId}},e.payload.type){case"requestMilestone":return Object(i.d)(t,[e.payload],s,c);case"createMilestone":var m=Object(i.x)(e.payload.data.created_milestone_request_id);return m?Object(i.B)(t,[m],function(t){return o({},t,{status:"created"})},c):t;default:return t}return t;default:return t}}},Fifx:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n("F/XL"),r=n("dzgT"),a=n("67Y/"),s=n("15JJ"),o=n("aGNc"),c=n("9Z1F"),u=n("t9fZ"),d=function(){function t(t,e,n){this.auth=t,this.http=e,this.freelancerHttp=n}return t.prototype.request=function(t,e,n){var r=this;return this.auth.getAuthorizationHeader().pipe(Object(a.a)(function(e){var n=t.contentType||"application/json";return{headers:e.set("Content-Type",n),body:r.serialiseBody(n,t.payload)}}),Object(s.a)(function(a){return r.http.request(e,t.url,{observe:"response",body:a.body,headers:a.headers,params:{webapp:"1",compact:"true",new_errors:"true"}}).pipe(Object(s.a)(function(e){return r.savePayload(e.status,t.payload,n).pipe(Object(o.a)({status:"success"}))}),Object(c.a)(function(t){return i.a({status:"error",errorCode:t.error.error.code})}))}),Object(u.a)(1))},t.prototype.serialiseBody=function(t,e){return t.includes("urlencoded")?Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(""+e[t])}).join("&"):JSON.stringify(e)},t.prototype.savePayload=function(t,e,n){var i=this;return r.b(this.auth.getAuthorizationHeader(),this.auth.getUserId()).pipe(Object(s.a)(function(r){var a,s=r[0],o=r[1];return i.http.post(i.freelancerHttp.getBaseUrl()+"/messages/0.1/messages/"+n+"/?action=save_rich_message_payload",((a={})[o]={status_code:t,payload:e},a),{headers:s,params:{webapp:"1",compact:"true",new_errors:"true"}})}),Object(o.a)(void 0))},t}()},GJVW:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("tVL2"),r=n("JcQJ"),a=function(){return(a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function s(t,e){switch(void 0===t&&(t={}),e.type){case"API_FETCH_SUCCESS":if("bids"===e.payload.type){var n=e.payload,s=n.result,o=n.ref,c=n.order;return Object(i.q)(t,Object(i.y)(s.bids,r.a),c,o)}return t;case"API_UPDATE_SUCCESS":if("projectViewBids"===e.payload.type||"bids"===e.payload.type){var u=e.payload,d=u.delta,l=u.originalObject;return o={path:{collection:"bids",authUid:e.payload.ref.path.authUid}},Object(i.B)(t,[l.id],function(t){return Object(i.h)(t,d)},o)}return t;case"API_PUSH_SUCCESS":if("projectViewBids"===e.payload.type||"bids"===e.payload.type){var h=e.payload.result;return o={path:{collection:"bids",authUid:e.payload.ref.path.authUid}},Object(i.r)(t,Object(i.y)([h],r.a),o)}return t;case"WS_MESSAGE":if(o={path:{collection:"bids",authUid:e.payload.toUserId}},"notifications"===e.payload.parent_type)switch(e.payload.type){case"bid":return Object(i.d)(t,[e.payload],r.c,o);case"bid_self":case"bid_updated":var p=Object(i.x)(e.payload.data.id);return Object(i.B)(t,[p],function(t){return a({},t,{id:p,bidderId:Object(i.x)(e.payload.data.userId),projectId:Object(i.x)(e.payload.data.projectId),amount:Object(i.x)(e.payload.data.amount),period:Object(i.x)(e.payload.data.period),description:e.payload.data.bid.descr||"",score:Object(i.x)(e.payload.data.bid.score),submitDate:1e3*Object(i.x)(e.payload.data.time),timeSubmitted:1e3*Object(i.x)(e.payload.data.time)})},o);case"bidretracted":return Object(i.v)(o,t,e.payload.data.bid_id);case"revoked":var f=e.payload.data.apiMessage,m=f.bid.id;return Object(i.B)(t,[m],function(t){return a({},t,{id:m,bidderId:f.bid.bidder_id,projectId:f.project.id,awardStatus:f.bid.award_status})},o);case"accepted":var b=e.payload.data.apiMessage,g=b.bid.id;return Object(i.B)(t,[g],function(t){return a({},t,{id:g,bidderId:b.bid.bidder_id,projectId:b.project.id},b.bid.amount?{amount:b.bid.amount}:{},{retracted:e.payload.data.bid.retracted,period:b.bid.period,awardStatus:b.bid.award_status,sponsored:e.payload.data.bid.sponsored})},o);case"denyed":var v=e.payload.data.apiMessage,y=Object(i.x)(e.payload.data.bidId);return Object(i.B)(t,[y],function(t){return a({},t,{id:Object(i.x)(e.payload.data.bidId),bidderId:v.bid.bidder_id,projectId:v.project.id,awardStatus:"rejected"})},o);case"award":var j=e.payload.data.apiMessage,O=j.bid.id;return Object(i.B)(t,[O],function(t){return a({},t,{id:O,bidderId:j.bid.bidder_id,projectId:j.project.id,amount:j.bid.amount,period:j.bid.period,awardStatus:j.bid.award_status})},o);case"completed":var S=e.payload.data.bidId;return S?Object(i.B)(t,[Object(i.x)(S)],function(t){return a({},t,{completeStatus:"complete"})},o):t;default:return t}return t;default:return t}}},HJ3d:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("mrSG"),r=n("tVL2"),a=n("jYNz"),s=n("VnD/"),o=n("67Y/"),c=n("/PH2"),u=function(){function t(t,e,n,i,a){var u=this;this.actions$=t,this.auth=e,this.store$=n,this.messagingChat=i,this.router=a,this.fetchData$=this.actions$.pipe(Object(s.a)(r.n),Object(o.a)(function(t){return t.payload}),Object(s.a)(d),Object(c.a)(this.store$,this.auth.authState$),Object(s.a)(function(t){return!!t[0]}),Object(o.a)(function(t){var e=t[0],n=t[1],i=t[2];if(i&&e.data.notify_user&&e.data.from_user!==Object(r.x)(i.userId)&&!u.router.url.startsWith("/messages"))u.messagingChat.startChat({userIds:e.data.thread_details.members,threadType:e.data.thread_details.thread_type,origin:"websocket",context:e.data.thread_details.context,threadId:e.data.thread_id,focus:!1,doNotRedirect:!0});else{var a={collection:"threads",authUid:e.toUserId,ids:[String(e.data.thread_id)]};if(!Object(r.u)(n.threads,a,e.data.thread_id))return{type:"REQUEST_DATA",payload:{type:"threads",ref:{path:a},clientRequestIds:[]}}}}),Object(s.a)(r.l))}return Object(i.__decorate)([Object(a.b)(),Object(i.__metadata)("design:type",Object)],t.prototype,"fetchData$",void 0),t}();function d(t){return"private"===t.type&&"messages"===t.parent_type}},HK0C:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("tVL2"),r=n("aK1y"),a=n("oAHh"),s=function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function o(t,e){switch(void 0===t&&(t={}),e.type){case"API_FETCH_SUCCESS":if("threads"===e.payload.type){var n=e.payload,o=n.result,c=n.ref,u=n.order;return Object(i.q)(t,Object(i.y)(o.threads,a.a,c.path.authUid),u,c)}return t;case"API_PUSH_SUCCESS":if("threads"===e.payload.type){var d=e.payload;return o=d.result,c=d.ref,Object(i.r)(t,Object(i.y)([o],a.a,c.path.authUid),c)}return t;case"API_UPDATE":if("threads"===e.payload.type){var l=e.payload,h=l.delta,p=(c=l.ref,(g=l.originalObject).id.toString()),f=Object(i.u)(t,c.path,p);if(!f)throw new Error("Thread being updated is missing in the store");return Object(i.r)(t,Object(i.y)([p],function(t){return h.folder?s({},f,{folder:h.folder||"inbox"}):h.isRead?s({},f,{messageUnreadCount:0,isRead:!0}):f}),c)}return t;case"API_UPDATE_SUCCESS":if("threads"===e.payload.type){var m=e.payload,b=m.delta,g=m.originalObject,v=(c=m.ref,m.rawRequest);if("action"in v&&"add"===v.action)return Object(i.r)(t,Object(i.y)([e.payload.result],a.a,c.path.authUid),c);p=g.id.toString();var y=Object(i.u)(t,c.path,p);if(!y)throw new Error("Thread being updated is missing in the store");return Object(i.r)(t,Object(i.y)([p],function(t){return Object(i.h)(y,b)}),c)}return t;case"API_UPDATE_ERROR":if("threads"===e.payload.type){var j=e.payload,O=j.delta,S=j.originalObject,C=(c=j.ref,p=S.id.toString(),Object(i.u)(t,c.path,p));if(!C)throw new Error("Thread being updated is missing in the store");return Object(i.r)(t,Object(i.y)([p],function(t){return s({},C,O.folder?{folder:S.folder||"inbox"}:{})}),c)}return t;case"WS_MESSAGE":var w=e.payload,I=w.toUserId,_={collection:"threads",authUid:I};if(c={path:_},"messages"===w.parent_type&&("user_read"===w.type||"typing"===w.type)){var E="user_read"===w.type?w.data.user_id:w.data.from_user,U="user_read"===w.type?w.data.thread_ids:[w.data.thread];return E===Object(i.x)(I)?Object(i.B)(t,"user_read"===w.type?w.data.thread_ids:[w.data.thread],function(t){return s({},t,{message_unread_count:0})},c):Object(i.B)(t,U,function(t){var e;return s({},t,{userReadTimes:s({},t.userReadTimes,(e={},e[E]=Date.now(),e))})},c)}if("messages"===w.parent_type&&"write_privacy_update"===w.type)return Object(i.B)(t,w.data.thread_ids,function(t){return s({},t,{writePrivacy:w.data.write_privacy})},c);if("messages"===w.parent_type&&"private"===w.type)return Object(i.B)(t,[w.data.thread_id],function(t){var e,n={attachments:w.data.attachments,fromUser:w.data.from_user,id:w.data.id,message:w.data.message,messageSource:w.data.message_source,threadId:w.data.thread_id,timeCreated:1e3*w.data.time_created,sendStatus:r.a.SENT},a=w.data.from_user===Object(i.x)(w.toUserId)?0:t.messageUnreadCount+1;return s({},t,{message:n,messageUnreadCount:a,isRead:0===a,timeUpdated:n.timeCreated,userReadTimes:s({},t.userReadTimes,(e={},e[w.data.from_user]=n.timeCreated,e))})},c);if("notifications"===w.parent_type&&"groupchat"===w.type){var x=w.data.payload.members,T=Object(i.u)(t,_,w.data.payload.thread);if(!T)return t;var k="add"===w.data.action?T.members.concat(x):T.members.filter(function(t){return!x.includes(t)}),M=k.filter(function(t){return t!==Object(i.x)(w.toUserId)}),R="add"===w.data.action?T.inactiveMembers.filter(function(t){return!x.includes(t)}):T.inactiveMembers.concat(x);return k.includes(Object(i.x)(w.toUserId))?Object(i.d)(t,[w.data.payload.thread],function(t){return s({},T,{members:k,otherMembers:M,inactiveMembers:R})},c):Object(i.v)(c,t,w.data.payload.thread)}return t;default:return t}}},KMQH:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("CcnG"),r=n("vYTZ"),a=n("vUsZ"),s=function(){function t(){this.FontType=a.d,this.IconColor=r.c,this.IconSize=r.d,this.HoverColor=r.a,this.removeAttachment=new i.EventEmitter,this.removeUpload=new i.EventEmitter}return t.prototype.removeFailedUpload=function(t){this.removeUpload.emit(t)},t.prototype.handleRemoveAttachment=function(t){this.removeAttachment.emit(t)},t.prototype.identifyAttachment=function(t,e){return e.name},t}()},LU0i:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},LaQp:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("CcnG"),r=n("vYTZ"),a=function(){function t(){this.IconColor=r.c,this.IconSize=r.d,this.HoverColor=r.a,this.hasUserSearchAccess=!1,this.modifyMembers=new i.EventEmitter,this.selectedUsers=new Set}return t.prototype.handleUserSelected=function(t){this.selectedUsers.has(t)?this.selectedUsers.delete(t):this.selectedUsers.add(t),this.modifyMembers.emit(this.selectedUsers)},t.prototype.resetSelectedUsers=function(){this.selectedUsers.clear()},t.prototype.filterCandidatesBySearchTerm=function(t,e){return t.filter(function(t){return t.displayName.toLowerCase().includes(e.toLowerCase())})},t.prototype.ngOnChanges=function(t){("searchText"in t||"candidateBidders"in t)&&(this.filteredCandidateBidders=this.filterCandidatesBySearchTerm(this.candidateBidders,this.searchText)),("searchText"in t||"candidateContacts"in t)&&(this.filteredCandidateContacts=this.filterCandidatesBySearchTerm(this.candidateContacts,this.searchText)),("searchText"in t||"candidateCollaborators"in t)&&(this.filteredCandidateCollaborators=this.filterCandidatesBySearchTerm(this.candidateCollaborators,this.searchText)),("searchText"in t||"candidateTeamMembers"in t)&&(this.filteredCandidateTeamMembers=this.filterCandidatesBySearchTerm(this.candidateTeamMembers,this.searchText))},t}()},Loon:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("vUsZ"),r=function(){return function(){this.FontType=i.d,this.FontSize=i.b}}()},M5OR:function(t,e,n){"use strict";var i=n("tVL2");function r(t){return{id:t.channel,channel:t.channel,name:t.name,order:t.order,enabled:t.enabled,notify:t.notify,header:t.header,notificationType:t.notificationType}}function a(t,e){switch(void 0===t&&(t={}),e.type){case"API_FETCH_SUCCESS":if("notificationsPreferences"===e.payload.type){var n=e.payload,a=n.result,s=n.ref,o=n.order;return Object(i.q)(t,Object(i.y)(a,r),o,s)}return t;case"API_SET_SUCCESS":if("notificationsPreferences"===e.payload.type){var c=e.payload;return a=c.result,s=c.ref,Object(i.r)(t,Object(i.y)(a,r),s)}return t;default:return t}}n.d(e,"a",function(){return a})},Mdby:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("tVL2");function r(){return{defaultOrder:{field:"maxWeight",direction:i.c.DESC},fetch:function(){return{endpoint:"contacts/0.1/contacts",params:{}}}}}},MrnD:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("tVL2");function r(){return{defaultOrder:{field:"timeCreated",direction:i.c.DESC},fetch:function(t,e,n){return{endpoint:"projects/0.1/milestones",params:{projects:Object(i.k)(n,"projectId"),bids:Object(i.k)(n,"bidId"),bidders:Object(i.k)(n,"bidderId")}}},push:function(t,e,n){if(!e.description)throw new Error("Milestone description not provided on push");return{endpoint:"projects/0.1/milestones/",payload:{bidder_id:e.bidderId,amount:e.amount,project_id:e.projectId,description:e.description,request_id:n?Object(i.x)(n.requestId):void 0}}},update:function(t,e,n){var i,r="projects/0.1/milestones/"+n.id+"/";if(("frozen"===n.status||"requested_release"===n.status)&&"cleared"===e.status&&void 0!==e.amount){if(i)throw new Error("Cannot update two milestones at once, at release");i={action:"release",amount:e.amount}}if("frozen"===n.status&&"requested_release"===e.status){if(i)throw new Error("Cannot update two milestones at once, at request release");i={action:"request_release"}}if(("frozen"===n.status||"requested_release"===n.status||"pending"===n.status)&&"canceled"===e.status){if(i)throw new Error("Cannot update two milestones at once, at cancel");i={action:"cancel"}}if(n.description!==e.description&&"requested_release"!==e.status&&"cleared"!==e.status){if(i)throw new Error("Cannot update two milestones at once, at update");i={action:"update",description:e.description}}if("request_cancel"===e.action&&e.actionReason&&(i={action:e.action,reason:e.actionReason,reason_text:"other"===e.actionReason?e.actionReasonText:""}),n.cancellationRequested&&!1===e.cancellationRequested){if(i)throw new Error("Cannot update two milestones at once, at reject cancel");i={action:"reject_cancel"}}if(void 0===i)throw new Error("Could not update due to missing payload");return{asFormData:!1,payload:i,endpoint:r,method:"PUT"}}}}},PeIj:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},RC6p:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("tVL2");function r(){return{defaultOrder:{field:"id",direction:i.c.ASC},fetch:function(t,e,n){return{endpoint:"users/0.1/teams",isGaf:!1,params:{owners:Object(i.k)(n,"ownerUserId"),members:Object(i.k)(n,"members")[0]}}}}}},RDQB:function(t,e,n){"use strict";n.d(e,"a",function(){return j});var i=n("rMUQ"),r=n("f3kX"),a=n("aa9U"),s=n("DQ19"),o=n("5I7X"),c=n("kGt0"),u=n("I2Cp"),d=n("vUsZ"),l=n("vri9"),h=n("XwZk"),p=n("XxGm"),f=n("F/XL"),m=n("dzgT"),b=n("67Y/"),g=n("ad02"),v=n("15JJ"),y=function(){return(y=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},j=function(){function t(t,e,n,i,r){this.router=t,this.modalService=e,this.datastore=n,this.changeDetectorRef=i,this.breakpointObserver=r,this.ButtonSize=a.c,this.FontType=d.d,this.FontColor=d.a,this.FontSize=d.b,this.FontWeight=d.e,this.HorizontalAlignment=s.a,this.LinkColor=o.a,this.LinkHoverColor=o.b,this.Margin=c.a,this.VerticalAlignment=s.b,this.extended=!1,this.inboxRedesign$=f.a(!1),this.buttonColor=a.a.SECONDARY,this.buttonBusy=!1,this.greenBtnStates=["projectAwardHourly","projectAwardFixed","projectAcceptFixed","projectAcceptHourly","projectAcceptRedirect"]}return t.prototype.ngOnInit=function(){var t=this;if(this.mobileBreakpoint$=this.breakpointObserver.observe(r.a.TABLET).pipe(Object(b.a)(function(t){return!t.matches})),this.mobileView$=m.b(this.mobileBreakpoint$,this.inboxRedesign$).pipe(Object(b.a)(function(t){return t[0]&&t[1]}),Object(g.a)()),this.useMiniButton$=this.inboxRedesign$.pipe(Object(v.a)(function(e){return e&&t.extended?t.mobileView$:f.a(!t.extended)})),Object(i.isDefined)(this.groupOtherMembersList)){var e=this.groupOtherMembersList.slice(0,3).map(function(t){return t.displayName}).join(", ");this.otherMembersList=this.groupOtherMembersList.length>3?e+", +"+(this.groupOtherMembersList.length-3):e}},t.prototype.handleButtonClick=function(){if(this.state&&this.state.name)switch(this.state.name){case"hireme":case"milestoneCreateRedirect":case"projectAwardHourly":case"projectAcceptRedirect":case"setupBilling":case"trackTime":case"requestMilestoneRedirect":this.state.button&&"LINK"===this.state.button.data.type&&this.goToUrl(this.state.button.data.buttonUrl,this.state.button.data.buttonExtras);break;case"projectAwardFixed":this.awardFixed();break;case"milestoneCreate":case"milestoneCreateInitial":case"milestoneCreateFromRequest":this.createMilestone();break;case"requestMilestone":this.requestMilestone();break;case"projectAcceptHourly":case"projectAcceptFixed":this.accept();break;default:console.warn("Unknown context box state button clicked")}},t.prototype.ngOnChanges=function(){this.state&&this.state.name&&(this.buttonColor=this.greenBtnStates.includes(this.state.name)?a.a.SUCCESS:a.a.SECONDARY)},t.prototype.goToUrl=function(t,e){e?this.router.navigate([t],e):this.router.navigate([t])},t.prototype.awardFixed=function(){var t=this;if(this.state&&this.state.button&&"AWARD_FIXED"===this.state.button.data.type){var e=this.state.button.data,n=e.bidId,i=e.projectId;this.buttonBusy=!0;var r=this.modalService.open(l.a,{inputs:{bidId:n,projectId:i},size:u.a.MID,edgeToEdge:!0});r.afterOpen().toPromise().then(function(e){t.buttonBusy=!1,t.changeDetectorRef.markForCheck()}),r.afterClosed().toPromise().then(function(e){e&&t.goToUrl("/projects/"+i+".html",{fragment:"/management"})})}},t.prototype.createMilestone=function(){var t=this;if(this.state&&this.state.button&&"CREATE_MILESTONE"===this.state.button.data.type&&"hireme"!==this.state.name){this.buttonBusy=!0;var e=this.state.button.data;this.modalService.open(h.a,{inputs:{bidId:e.bidId,projectId:e.projectId,currencyDetails:e.currencyDetails,username:this.state.otherUserName,bidderId:e.bidderId},size:u.a.SMALL}).afterOpen().toPromise().then(function(){t.changeDetectorRef.markForCheck(),t.buttonBusy=!1})}},t.prototype.requestMilestone=function(){var t=this;this.state&&this.state.button&&"hireme"!==this.state.name&&"REQUEST_MILESTONE"===this.state.button.data.type&&(this.buttonBusy=!0,window.messagingWebappCompatModals?this.modalService.open(p.a,{inputs:y({},this.state.button.data),closeable:!1,showBackdrop:!1}).afterOpen().toPromise().then(function(){t.buttonBusy=!1,t.changeDetectorRef.markForCheck()}):(window.open("projects/"+this.state.button.data.projectId+".html"),this.buttonBusy=!1))},t.prototype.accept=function(){var t=this;if(this.state&&this.state.button&&"ACCEPT"===this.state.button.data.type){this.buttonBusy=!0;var e=this.state.button.data.projectId;this.datastore.collection("bids",function(t){return t.where("projectId","==",e)}).update(this.state.button.data.bidId,{awardStatus:"awarded"}).then(function(){t.buttonBusy=!1,t.changeDetectorRef.markForCheck()})}},t}()},Rlv1:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("CcnG"),r=n("aa9U"),a=n("vYTZ"),s=function(){function t(){this.ButtonColor=r.a,this.IconColor=a.c,this.IconSize=a.d,this.HoverColor=a.a,this.showManagementView=new i.EventEmitter,this.closeView=new i.EventEmitter,this.userRemoval=new i.EventEmitter}return t.prototype.handleCloseView=function(){this.closeView.emit()},t.prototype.handleShowManagementView=function(){this.showManagementView.emit()},t.prototype.handleRemove=function(t){this.userRemoval.emit(t)},t}()},S7q0:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n("f2/7"),r=n("w6zz"),a=n("kGt0"),s=n("vUsZ"),o=n("n9BS"),c=function(){function t(){this.Margin=a.a,this.FileDisplaySize=r.a,this.FontColor=s.a,this.FontSize=s.b,this.ImageAttachmentThumbnailHeight=o.a,this.ImageAttachmentThumbnailWidth=o.b,this.isWhitelistUser=!1}return Object.defineProperty(t.prototype,"attachment",{set:function(t){this.filename=t.filename,this.path=Object(o.c)(t.messageId,t.filename),this.date=new Date(t.timeCreated),this.isImageFile=Object(i.c)(this.filename),this.imageThumbnailPath=Object(o.d)(t.messageId,t.filename,{height:o.a.ATTACHMENT_SIDEBAR,width:o.b.ATTACHMENT_SIDEBAR})},enumerable:!0,configurable:!0}),t}()},SD0X:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("tVL2");function r(){return{defaultOrder:{field:"timeCreated",direction:i.c.DESC},fetch:function(t,e,n){return{endpoint:"messages/0.1/messages",params:{threads:Object(i.k)(n,"threadId"),thread_details:"true",user_details:"true"}}},push:function(t,e){return{endpoint:"messages/0.1/threads/"+e.threadId+"/messages/",asFormData:!0,payload:{message:e.message,client_message_id:e.clientMessageId?String(e.clientMessageId):String(Date.now()),source:e.messageSource}}}}}},SL3p:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("CcnG"),r=n("DQ19"),a=n("wLD+"),s=n("vYTZ"),o=function(){function t(){this.VerticalAlignment=r.b,this.HeadingSize=a.b,this.HeadingType=a.c,this.IconColor=s.c,this.IconSize=s.d,this.contactsDrawerToggle=new i.EventEmitter,this.chatOptionsDrawerToggle=new i.EventEmitter}return t.prototype.onResize=function(){this.contactsDrawerToggle.emit(!1),this.chatOptionsDrawerToggle.emit(!1)},t.prototype.openContactsDrawer=function(){this.contactsDrawerToggle.emit(!0)},t.prototype.openChatOptionsDrawer=function(){this.chatOptionsDrawerToggle.emit(!0)},t}()},SO6p:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){function t(t){this.element=t,this.MAX_HEIGHT=72,this.MIN_HEIGHT=32}return t.prototype.onInput=function(t){this.adjust()},t.prototype.adjust=function(){var t=this.element.nativeElement;t.style.overflow="hidden",t.style.height="auto",t.style.overflowY="scroll",t.style.height=Math.max(this.MIN_HEIGHT,Math.min(t.scrollHeight,this.MAX_HEIGHT))+"px",t.scrollHeight<this.MAX_HEIGHT&&(t.style.overflow="hidden")},t.prototype.focus=function(){this.element.nativeElement.focus()},t}()},Sl4Q:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},U2EK:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("f2/7"),r=n("pTqS"),a=n("I2Cp"),s=n("vUsZ"),o=n("iRZu"),c=n("n9BS"),u=function(){function t(t,e){this.modalService=t,this.tracking=e,this.FontSize=s.b,this.FontWeight=s.e,this.ListItemPadding=r.b,this.ListItemType=r.c,this.ModalSize=a.a,this.isWhitelistUser=!1}return t.prototype.attachmentPath=function(t){return Object(c.c)(t.messageId,t.filename)},t.prototype.identifyAttachment=function(t,e){return e.id},t.prototype.openPreviewModal=function(t){var e=this;if(/msie\s|trident\/|edge\//i.test(window.navigator.userAgent))window.location.href=this.attachmentPath(t);else{var n=this.modalService.open(o.a,{inputs:{filepath:this.attachmentPath(t),filename:t.filename,filetype:Object(i.b)(t.filename)},edgeToEdge:!0,size:a.a.XLARGE});n.afterOpen().toPromise().then(function(){e.tracking.track("user_action",{section:"inbox",subsection:"thread_attachments",label:"open_image_viewer"})}),n.afterClosed().toPromise().then(function(){e.tracking.track("user_action",{section:"messaging_image_viewer",subsection:"header",label:"close_image_viewer"})})}},t}()},UOxd:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("CcnG"),r=function(){function t(){this.hideGroupchatOverlay=new i.EventEmitter,this.modifyMembers=new i.EventEmitter,this.currentViewState="participant"}return t.prototype.setViewState=function(t){this.currentViewState=t},t.prototype.handleCloseGroupchatOverlay=function(){this.hideGroupchatOverlay.emit()},t.prototype.handleManagementAddUsers=function(t){this.modifyMembers.emit({action:"add",userIds:t}),this.hideGroupchatOverlay.emit()},t.prototype.handleUserRemovalTrigger=function(t){this.userToRemove=t,this.currentViewState=t.id===this.currentUser.id?"userLeave":"userRemoval"},t.prototype.handleUserRemovalConfirm=function(){this.userToRemove&&this.modifyMembers.emit({action:"remove",userIds:[this.userToRemove.id]}),this.userToRemove=void 0,this.currentViewState="participant"},t.prototype.handleUserRemovalCancel=function(){this.userToRemove=void 0,this.currentViewState="participant"},t}()},Uj17:function(t,e,n){"use strict";var i=n("tVL2"),r=n("zPe/");function a(t,e){var n=e[t.session_id];if(void 0===n)throw new Error("Agent sessions should always have an associated session.");return{id:t.id,type:t.support_type,state:t.state,latest:t.is_latest,createTime:1e3*t.create_time,resolvedTime:t.resolved_time?1e3*t.resolved_time:void 0,resolvedReason:t.resolved_reason||void 0,agentId:t.agent_id||void 0,starred:t.is_starred?t.is_starred:void 0,sessionId:t.session_id,sessionType:n.support_type,sessionOwnerId:n.user_id,sessionSource:n.source,sessionCreateTime:1e3*n.create_time}}function s(t,e){switch(void 0===t&&(t={}),e.type){case"API_FETCH_SUCCESS":if("agentSessions"===e.payload.type){var n=e.payload,s=n.result,o=n.ref,c=n.order;return s.agent_sessions&&s.sessions?Object(i.q)(t,Object(i.y)(s.agent_sessions,a,s.sessions),c,o):t}return t;case"WS_MESSAGE":var u=e.payload;if("supportQueueEvent"===u.type)switch(u.data.queueEventType){case r.a.ENQUEUE:case r.a.REASSIGN:return Object(i.d)(t,u.data.agent_sessions,a,{path:{collection:"agentSessions",authUid:u.toUserId}},u.data.sessions);default:return t}return t;default:return t}}n.d(e,"a",function(){return s})},Uw4d:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},Vug6:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("vUsZ"),r=function(){return function(){this.FontType=i.d,this.FontSize=i.b}}()},WcJj:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n("SL3p"),n("KMQH"),n("ccnH"),n("rurT"),n("RDQB"),n("9N8w"),n("b1V1"),n("4pWq"),n("Xcfn"),n("cV7A"),n("7A1k"),n("bOER"),n("S7q0"),n("U2EK"),n("7TTF"),n("grJo"),n("Vug6"),n("Loon"),n("Z8sc"),n("UOxd"),n("LaQp"),n("7Qkd"),n("Eg4/"),n("DIEf"),n("1sHd"),n("xU4L"),n("imNX"),n("Rlv1"),n("h5VB"),n("vwlU"),n("+qCR"),n("LU0i"),n("A2Pa"),n("n+TX"),n("PeIj"),n("wWty"),n("SO6p"),n("rVCp");var i={suppressScrollX:!0},r=function(){return function(){}}()},WkbR:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("tVL2");function r(){return{defaultOrder:{field:"id",direction:i.c.DESC},fetch:function(t,e,n){return{endpoint:"projects/0.1/hourly_contracts",params:{project_ids:Object(i.k)(n,"projectId"),bidder_ids:Object(i.k)(n,"bidderId"),active:Object(i.k)(n,"active")[0]?"true":void 0}}},update:function(t,e,n){var i,r="projects/0.1/hourly_contracts/"+n.bidId;if("timeTrackingStopped"in e?i=void 0!==e.timeTrackingStopped?{action:"enable_time_tracking"}:{action:"stop_time_tracking"}:"currentWorkLimit"in e&&n.currentWorkLimit!==e.currentWorkLimit&&(i={action:"update",work_limit:e.currentWorkLimit}),void 0===i)throw new Error("Could not update due to missing payload");return{endpoint:r,payload:i,method:"PUT",asFormData:!0}}}}},X10v:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("tVL2");function r(){return{defaultOrder:{field:"timeUpdated",direction:i.c.DESC},fetch:function(t,e,n){return{endpoint:"messages/0.1/threads",params:{threads:Object(i.k)(n,"id"),members:Object(i.k)(n,"otherMembers")[0],context_type:a(n),contexts:s(n),thread_types:Object(i.k)(n,"threadType"),is_read:Object(i.k)(n,"isRead")[0],folders:Object(i.k)(n,"folder"),unread_count:"true",last_message:"true",context_details:"true",user_details:"true",user_read_times:"true"}}},push:function(t,e){return{endpoint:"messages/0.1/threads/",asFormData:!0,payload:{context:"none"!==e.context.type?e.context.id:void 0,context_type:e.context.type,thread_type:e.threadType,members:e.members,message:e.message&&e.message.message||"",source:21}}},update:function(t,e,n){var r,a,s="PUT";if(!0===e.isRead){if(r)throw new Error("Cannot update two fields at once");r={threads:[Object(i.x)(n.id)],action:"read"},a="messages/0.1/threads/"}if(void 0!==e.isMuted){if(r)throw new Error("Cannot update two fields at once");r={threads:[Object(i.x)(n.id)],action:e.isMuted?"mute":"unmute"},a="messages/0.1/threads/"}if(void 0!==e.isBlocked){if(r)throw new Error("Cannot update two fields at once");r={threads:[Object(i.x)(n.id)],action:e.isBlocked?"block":"unblock"},a="messages/0.1/threads/"}if(e.folder){if(r)throw new Error("Cannot update two fields at once");if("inbox"===e.folder)r={threads:[Object(i.x)(n.id)],action:"unarchive"};else{if("archived"!==e.folder)throw new Error("Cannot push for threads");r={threads:[Object(i.x)(n.id)],action:"archive"}}a="messages/0.1/threads/"}if(e.members&&e.members.length!==n.members.length){if(r)throw new Error("Cannot update two fields at once");a="messages/0.1/threads/"+n.id+"/members/",e.members.length>n.members.length?r={thread_id:n.id,action:"add",members:e.members.filter(i.l).filter(function(t){return!n.members.includes(t)})}:e.members.length<n.members.length&&(r={thread_id:n.id,action:"remove",members:n.members.filter(function(t){return!(e.members||[]).includes(t)})})}if(e.typing){if(r)throw new Error("Cannot update two fields at once");r={thread_id:n.id},a="messages/0.1/threads/"+n.id+"/typing/",s="POST"}if(void 0===r||void 0===a)throw new Error("Cound not update any fields of");return{asFormData:!0,payload:r,endpoint:a,method:s}}}}function a(t){return Object(i.k)(t,"context",function(t){return"=="===t.condition?t.value.type:void 0})[0]}function s(t){return Object(i.k)(t,"context",function(t){return"=="===t.condition&&"none"!==t.value.type?t.value.id:void 0}).filter(i.l)}},Xcfn:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var i=n("CcnG"),r=n("rMUQ"),a=n("aK1y"),s=n("OHkV"),o=n("vYTZ"),c=n("5I7X"),u=n("kGt0"),d=n("vUsZ"),l=n("F3Eq"),h=function(){function t(){this.Margin=u.a,this.FontColor=d.a,this.LinkColor=c.a,this.IconColor=o.c,this.IconSize=o.d,this.HoverColor=o.a,this.TooltipPosition=l.a,this.isTyping=!1,this.chatBoxMode=!0,this.resendMessage=new i.EventEmitter,this.isRichMessage=!1,this.readMarkers=[],this.supportedRichMessageType=["share_project","share_contest"],this.whitelistUsers=[26088556,31141502],this.author=void 0,this.options=["Resend","Resend All","Remove"]}return t.prototype.ngOnInit=function(){this.message.richMessage&&(this.isRichMessage=void 0!==this.message.richMessage),this.updateMessageAttributes()},t.prototype.ngOnChanges=function(){this.updateMessageAttributes()},t.prototype.getAuthor=function(){var t=this;return this.threadMembers?this.threadMembers.find(function(e){return e.id===t.message.fromUser}):void 0},t.prototype.differentAuthor=function(t){return this.message.fromUser!==t.fromUser},t.prototype.shouldShowTimestamp=function(t,e){return t.timeCreated-e.timeCreated>144e5},t.prototype.updateMessageAttributes=function(){var t=this;this.fromMe=this.message.fromUser===Number(this.currentUserId),this.richMessageFromMe=Object(s.b)(this.message.richMessage)&&Object(s.b)(this.message.richMessage.fromUser)&&this.message.richMessage.fromUser===Object(r.toNumber)(this.currentUserId),this.isTimestamp=!this.before||this.shouldShowTimestamp(this.message,this.before),this.isFirst=!this.before||this.differentAuthor(this.before)||this.isTimestamp,this.isLast=!this.after||this.differentAuthor(this.after)||this.shouldShowTimestamp(this.after,this.message),this.hasUserImg=!this.fromMe&&this.isLast,this.sent=void 0!==this.message.messageId,this.sent=this.message.sendStatus===a.a.SENT,this.sending=this.message.sendStatus===a.a.SENDING,this.failed=this.fromMe&&this.message.sendStatus===a.a.FAILED,this.isLastFailed=this.failed&&(!this.after||this.after.sendStatus!==a.a.FAILED),this.shouldRender=!(this.message.richMessage&&0===this.message.richMessage.long.length&&0===this.message.richMessage.short.length),this.otherMembers&&this.userReadTimes&&(this.readMarkers=this.otherMembers.filter(function(e){var n=t.userReadTimes[e.id];return n>=t.message.timeCreated&&(!t.after||n<t.after.timeCreated)}).map(function(e){return{time:t.userReadTimes[e.id],user:e}})),this.author=this.getAuthor(),this.isWhitelistUser=this.whitelistUsers.includes(Object(r.toNumber)(this.currentUserId))},t.prototype.handleResend=function(t){t.stopPropagation(),this.resendMessage.emit(this.message)},t.prototype.identifyAttachment=function(t,e){return e.name},t.prototype.identifyReadMarker=function(t,e){return""+e.user.id+e.time},t.prototype.getSupportedRichMessageType=function(t){var e=this;if(t.types)return t.types.find(function(t){return e.supportedRichMessageType.includes(t.type)})},t}()},Z8sc:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("vUsZ"),r=function(){return function(t){this.siteName=t,this.FontType=i.d,this.FontSize=i.b}}()},ZpPe:function(t,e,n){"use strict";var i=n("tVL2"),r=n("ZqFd");function a(t){if(!t.project_id)throw Error("Milestone request doesn't have a project ID.");if(!t.time_created)throw Error("Milestone request doesn't have a time created.");return{id:t.transaction_id||Math.random(),projectOwnerId:t.project_owner_id,bidderId:t.bidder_id,amount:t.amount,reason:t.reason,description:t.other_reason,projectId:t.project_id,bidId:t.bid_id,currency:t.currency?Object(r.a)(t.currency):void 0,isFromPrepaid:t.is_from_prepaid,status:t.status,disputeId:Object(i.x)(t.dispute_id),cancellationRequested:t.cancellation_requested,timeCreated:1e3*t.time_created,actionReason:t.cancellation_reason,actionReasonText:t.reason_text}}function s(t){if(!t.project_id)throw Error("Milestone doesn't have a project ID.");if(void 0===t.time_created)throw Error("Milestone doesn't have a time created.");return{id:t.transaction_id&&"number"==typeof t.transaction_id?Object(i.x)(t.transaction_id):Math.random(),projectOwnerId:Object(i.x)(t.project_owner_id),bidderId:Object(i.x)(t.bidder_id),amount:Object(i.x)(t.amount),reason:t.reason,description:t.other_reason,projectId:Object(i.x)(t.project_id),bidId:Object(i.x)(t.bid_id),currency:t.currency?Object(r.b)(t.currency):void 0,isFromPrepaid:t.is_from_prepaid,status:t.status,disputeId:Object(i.x)(t.dispute_id),timeCreated:"string"==typeof t.time_created?1e3*Object(i.x)(t.time_created):Date.now()}}n.d(e,"a",function(){return c});var o=function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function c(t,e){switch(void 0===t&&(t={}),e.type){case"API_FETCH_SUCCESS":if("milestones"===e.payload.type){var n=e.payload,r=n.result,c=n.ref,u=n.order;return Object(i.q)(t,Object(i.y)(r.milestones,a),u,c)}return t;case"API_UPDATE_SUCCESS":if("milestones"===e.payload.type){var d=e.payload,l=d.delta,h=d.originalObject,p=(c=d.ref,(r=d.result)?r.remaining_milestone:void 0);if(p&&p.transaction_id){var f=Object(i.v)(c,t,h.id),m=r.released_milestone,b=Object(i.d)(f,[m],function(){return a(o({},m,{status:"cleared",time_created:Date.now()/1e3}))},c);return Object(i.d)(b,[p],function(){return a(o({},p,{status:"frozen",time_created:Date.now()/1e3}))},c)}return"canceled"===l.status?Object(i.v)(c,t,h.id):Object(i.B)(t,[h.id],function(t){return Object(i.h)(t,l)},c)}return t;case"API_PUSH_SUCCESS":if("milestones"===e.payload.type){var g=e.payload;return r=g.result,c=g.ref,Object(i.r)(t,Object(i.y)([r],a,c.path.authUid),c)}return t;case"WS_MESSAGE":if(c={path:{collection:"milestones",authUid:e.payload.toUserId}},"notifications"===e.payload.parent_type)switch(e.payload.type){case"cancelMilestone":return Object(i.v)(c,t,Object(i.x)(e.payload.data.tranId));case"createMilestone":var v=e.payload.data.newMilestone;return Object(i.d)(t,[v],s,c);case"accepted":var y=e.payload.data.milestoneIds;return Object(i.B)(t,y,function(t){return o({},t,{status:"frozen"})},c);default:return t}return t;default:return t}}},aKIq:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("tVL2");function r(){return{defaultOrder:{field:"createTime",direction:i.c.DESC},fetch:function(t,e,n){return{endpoint:"support/0.1/agent_sessions/",isGaf:!1,params:{agent_sessions:Object(i.k)(n,"id"),sessions:Object(i.k)(n,"sessionId"),agents:Object(i.k)(n,"agentId"),agent_session_states:Object(i.k)(n,"state"),starred:a(n,"starred"),latest:a(n,"latest"),source_type:s(n),sources:o(n),support_type:c(n)}}}}}function a(t,e){return Object(i.k)(t,e,function(t){return"=="!==t.condition||"true"!==(e=t.value).toString()&&"false"!==e.toString()?void 0:t.value;var e})[0]}function s(t){return Object(i.k)(t,"sessionSource",function(t){return"=="===t.condition&&t.value.type&&t.value.id?t.value.type:void 0})[0]}function o(t){return Object(i.k)(t,"sessionSource",function(t){return"=="===t.condition?t.value.type&&t.value.id:void 0}).filter(i.l)}function c(t){var e=Object(i.k)(t,"type",function(t){return"=="===t.condition?t.value:void 0})[0];return Object(i.k)(t,"sessionSource",function(t){return"=="===t.condition?t.value.type&&t.value.id:void 0})[0]?e:void 0}},agUy:function(t,e,n){"use strict";var i=n("CcnG"),r=n("xpqW"),a=n("w13q"),s=n("6gso"),o=n("LU0i"),c=n("9Aot"),u=n("X6Re"),d=n("gIcY"),l=n("w5Bh"),h=n("DSso"),p=n("DsW6"),f=n("lOjL"),m=n("KUXl"),b=n("DIEf"),g=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.SearchInput[_ngcontent-%COMP%]{width:100%}"]],data:{}});function v(t){return i["\u0275vid"](2,[(t()(),i["\u0275eld"](0,0,null,null,4,"fl-input",[["class","SearchInput"],["flTrackingLabel","groupChatSearch"],["iconStart","ui-search"],["ngDefaultControl",""],["placeholder","Search for People"]],null,[[null,"keypress"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var r=!0,a=t.component;return"input"===e&&(r=!1!==i["\u0275nov"](t,2)._handleInput(n.target.value)&&r),"blur"===e&&(r=!1!==i["\u0275nov"](t,2).onTouched()&&r),"compositionstart"===e&&(r=!1!==i["\u0275nov"](t,2)._compositionStart()&&r),"compositionend"===e&&(r=!1!==i["\u0275nov"](t,2)._compositionEnd(n.target.value)&&r),"keypress"===e&&(r=!1!==a.handleInputKeypress(n)&&r),r},u.b,u.a)),i["\u0275prd"](5120,null,d.n,function(t){return[t]},[d.d]),i["\u0275did"](2,16384,null,0,d.d,[i.Renderer2,i.ElementRef,[2,d.a]],null,null),i["\u0275did"](3,245760,null,0,l.a,[i.ChangeDetectorRef],{control:[0,"control"],placeholder:[1,"placeholder"],size:[2,"size"],iconStart:[3,"iconStart"],leftIconSize:[4,"leftIconSize"],leftIconColor:[5,"leftIconColor"]},null),i["\u0275did"](4,4407296,null,0,h.a,[i.ElementRef,i.Renderer2,p.a,f.a,[2,m.a]],{flTrackingLabel:[0,"flTrackingLabel"]},null)],function(t,e){var n=e.component;t(e,3,0,n.inputControl,"Search for People",n.InputSize.SMALL,"ui-search",n.IconSize.SMALL,n.IconColor.DARK),t(e,4,0,"groupChatSearch")},null)}var y=n("Ip0R"),j=n("/3EI"),O=n("h5VB"),S=n("kfFR"),C=n("HsDr"),w=n("Q10I"),I=n("wCWs"),_=n("gdlK"),E=n("71eJ"),U=n("Z8zW"),x=n("DvWq"),T=n("B23V"),k=n("7Qkd"),M=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;margin-bottom:8px}.CandidateGroupTitle[_ngcontent-%COMP%]{font-size:13px;line-height:1.2}.CandidateItem[_ngcontent-%COMP%]{align-items:center;cursor:pointer;display:flex;padding:4px}.CandidateItem-selected[_ngcontent-%COMP%], .CandidateItem[_ngcontent-%COMP%]:hover{background-color:#dbf4ff}.DisplayName[_ngcontent-%COMP%]{margin-right:auto}"]],data:{}});function R(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"fl-icon",[["label","Collapse"],["name","ui-chevron-down"]],[[1,"data-backdrop",0],[1,"data-size",0],[1,"data-size-tablet",0],[1,"data-size-desktop",0]],null,null,S.b,S.a)),i["\u0275did"](1,704512,null,0,C.d,[i.Renderer2,w.b,I.a],{color:[0,"color"],name:[1,"name"],label:[2,"label"],hoverColor:[3,"hoverColor"],size:[4,"size"]},null)],function(t,e){var n=e.component;t(e,1,0,n.IconColor.MID,"ui-chevron-down","Collapse",n.HoverColor.PRIMARY,n.IconSize.XSMALL)},function(t,e){t(e,0,0,i["\u0275nov"](e,1).backdrop,i["\u0275nov"](e,1).size,i["\u0275nov"](e,1).sizeTablet,i["\u0275nov"](e,1).sizeDesktop)})}function A(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"fl-icon",[["label","Expand"],["name","ui-chevron-right"]],[[1,"data-backdrop",0],[1,"data-size",0],[1,"data-size-tablet",0],[1,"data-size-desktop",0]],null,null,S.b,S.a)),i["\u0275did"](1,704512,null,0,C.d,[i.Renderer2,w.b,I.a],{color:[0,"color"],name:[1,"name"],label:[2,"label"],hoverColor:[3,"hoverColor"],size:[4,"size"]},null)],function(t,e){var n=e.component;t(e,1,0,n.IconColor.MID,"ui-chevron-right","Expand",n.HoverColor.PRIMARY,n.IconSize.XSMALL)},function(t,e){t(e,0,0,i["\u0275nov"](e,1).backdrop,i["\u0275nov"](e,1).size,i["\u0275nov"](e,1).sizeTablet,i["\u0275nov"](e,1).sizeDesktop)})}function D(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"fl-icon",[["name","ui-plus"]],[[1,"data-backdrop",0],[1,"data-size",0],[1,"data-size-tablet",0],[1,"data-size-desktop",0]],null,null,S.b,S.a)),i["\u0275did"](1,704512,null,0,C.d,[i.Renderer2,w.b,I.a],{color:[0,"color"],name:[1,"name"],size:[2,"size"]},null)],function(t,e){var n=e.component;t(e,1,0,n.IconColor.MID,"ui-plus",n.IconSize.SMALL)},function(t,e){t(e,0,0,i["\u0275nov"](e,1).backdrop,i["\u0275nov"](e,1).size,i["\u0275nov"](e,1).sizeTablet,i["\u0275nov"](e,1).sizeDesktop)})}function L(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"fl-icon",[["name","ui-subtract-circle"]],[[1,"data-backdrop",0],[1,"data-size",0],[1,"data-size-tablet",0],[1,"data-size-desktop",0]],null,null,S.b,S.a)),i["\u0275did"](1,704512,null,0,C.d,[i.Renderer2,w.b,I.a],{color:[0,"color"],name:[1,"name"],size:[2,"size"]},null)],function(t,e){var n=e.component;t(e,1,0,n.IconColor.MID,"ui-subtract-circle",n.IconSize.SMALL)},function(t,e){t(e,0,0,i["\u0275nov"](e,1).backdrop,i["\u0275nov"](e,1).size,i["\u0275nov"](e,1).sizeTablet,i["\u0275nov"](e,1).sizeDesktop)})}function $(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,16,"fl-bit",[["class","CandidateItem"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.handleClick(t.context.$implicit)&&i),i},r.b,r.a)),i["\u0275did"](1,278528,null,0,y.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](2,{"CandidateItem-selected":0}),i["\u0275did"](3,49152,null,0,a.a,[],null,null),(t()(),i["\u0275eld"](4,0,null,0,5,"fl-user-avatar",[["size","small"]],[[1,"data-margin-right",0],[1,"data-margin-bottom",0],[1,"data-margin-right-tablet",0],[1,"data-margin-bottom-tablet",0],[1,"data-margin-right-desktop",0],[1,"data-margin-bottom-desktop",0],[1,"data-size",0]],null,null,_.b,_.a)),i["\u0275did"](5,16384,null,0,c.b,[],{flMarginRight:[0,"flMarginRight"]},null),i["\u0275did"](6,573440,null,0,E.b,[],{users:[0,"users"],size:[1,"size"],isOnline:[2,"isOnline"]},null),i["\u0275pad"](7,1),i["\u0275pid"](131072,y.AsyncPipe,[i.ChangeDetectorRef]),i["\u0275ppd"](9,2),(t()(),i["\u0275eld"](10,0,null,0,2,"fl-bit",[["class","DisplayName"]],null,null,null,r.b,r.a)),i["\u0275did"](11,49152,null,0,a.a,[],null,null),(t()(),i["\u0275ted"](12,0,["",""])),(t()(),i["\u0275and"](16777216,null,0,1,null,D)),i["\u0275did"](14,16384,null,0,y.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,0,1,null,L)),i["\u0275did"](16,16384,null,0,y.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component,r=t(e,2,0,n.selectedUsers.has(e.context.$implicit));t(e,1,0,"CandidateItem",r),t(e,5,0,n.Margin.XXXSMALL);var a=t(e,7,0,e.context.$implicit),s=i["\u0275unv"](e,6,2,t(e,9,0,i["\u0275nov"](e.parent.parent,0),e.context.$implicit,i["\u0275unv"](e,6,2,i["\u0275nov"](e,8).transform(n.onlineOfflineStatuses$))));t(e,6,0,a,"small",s),t(e,14,0,!n.selectedUsers.has(e.context.$implicit)),t(e,16,0,n.selectedUsers.has(e.context.$implicit))},function(t,e){t(e,4,0,i["\u0275nov"](e,5).flMarginRight,i["\u0275nov"](e,5).flMarginBottom,i["\u0275nov"](e,5).flMarginRightTablet,i["\u0275nov"](e,5).flMarginBottomTablet,i["\u0275nov"](e,5).flMarginRightDesktop,i["\u0275nov"](e,5).flMarginBottomDesktop,i["\u0275nov"](e,6).size),t(e,12,0,e.context.$implicit.displayName)})}function P(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,$)),i["\u0275did"](2,278528,null,0,y.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(t()(),i["\u0275and"](0,null,null,0))],function(t,e){var n=e.component;t(e,2,0,n.candidateUsers,n.trackByUserId)},null)}function F(t){return i["\u0275vid"](2,[i["\u0275pid"](0,U.a,[]),(t()(),i["\u0275eld"](1,0,null,null,7,"fl-button",[["class","CandidateGroupTitle"],["flTrackingLabel","expandCandidates"]],[[2,"ButtonGroupFirst",null],[2,"ButtonGroupMiddle",null],[2,"ButtonGroupLast",null],[1,"data-busy",0],[1,"data-color",0],[1,"data-display",0],[1,"data-size",0],[1,"data-size-tablet",0],[1,"data-size-desktop",0],[1,"disabled",0]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.handleExpand()&&i),i},x.b,x.a)),i["\u0275did"](2,573440,null,0,T.b,[],null,null),i["\u0275did"](3,4407296,null,0,h.a,[i.ElementRef,i.Renderer2,p.a,f.a,[2,m.a]],{flTrackingLabel:[0,"flTrackingLabel"]},null),(t()(),i["\u0275and"](16777216,null,0,1,null,R)),i["\u0275did"](5,16384,null,0,y.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,0,1,null,A)),i["\u0275did"](7,16384,null,0,y.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275ted"](8,0,[" "," (",") "])),(t()(),i["\u0275and"](16777216,null,null,1,null,P)),i["\u0275did"](10,16384,null,0,y.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,3,0,"expandCandidates"),t(e,5,0,n.expanded),t(e,7,0,!n.expanded),t(e,10,0,n.expanded)},function(t,e){var n=e.component;t(e,1,0,i["\u0275nov"](e,2).buttonGroupFirst,i["\u0275nov"](e,2).buttonGroupMiddle,i["\u0275nov"](e,2).buttonGroupLast,i["\u0275nov"](e,2).busy,i["\u0275nov"](e,2).color,i["\u0275nov"](e,2).display,i["\u0275nov"](e,2).size,i["\u0275nov"](e,2).sizeTablet,i["\u0275nov"](e,2).sizeDesktop,i["\u0275nov"](e,2).attrDisabled),t(e,8,0,n.name,n.candidateUsers.length)})}var z=n("LaQp"),N=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{background-color:#fff;display:flex;flex:0 1 100%;flex-direction:column;padding-bottom:8px;padding-top:8px}"]],data:{}});function B(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"app-candidate-group",[["name","Search"]],null,[[null,"userSelected"]],function(t,e,n){var i=!0;return"userSelected"===e&&(i=!1!==t.component.handleUserSelected(n)&&i),i},F,M)),i["\u0275did"](1,49152,null,0,k.a,[i.ChangeDetectorRef],{name:[0,"name"],candidateUsers:[1,"candidateUsers"],selectedUsers:[2,"selectedUsers"],onlineOfflineStatuses$:[3,"onlineOfflineStatuses$"]},{userSelected:"userSelected"})],function(t,e){var n=e.component;t(e,1,0,"Search",n.candidateUserSearch,n.selectedUsers,n.onlineOfflineStatuses$)},null)}function G(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"app-candidate-group",[["name","Bidders"]],null,[[null,"userSelected"]],function(t,e,n){var i=!0;return"userSelected"===e&&(i=!1!==t.component.handleUserSelected(n)&&i),i},F,M)),i["\u0275did"](1,49152,null,0,k.a,[i.ChangeDetectorRef],{name:[0,"name"],candidateUsers:[1,"candidateUsers"],selectedUsers:[2,"selectedUsers"],onlineOfflineStatuses$:[3,"onlineOfflineStatuses$"]},{userSelected:"userSelected"})],function(t,e){var n=e.component;t(e,1,0,"Bidders",n.filteredCandidateBidders,n.selectedUsers,n.onlineOfflineStatuses$)},null)}function V(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"app-candidate-group",[["name","Contacts"]],null,[[null,"userSelected"]],function(t,e,n){var i=!0;return"userSelected"===e&&(i=!1!==t.component.handleUserSelected(n)&&i),i},F,M)),i["\u0275did"](1,49152,null,0,k.a,[i.ChangeDetectorRef],{name:[0,"name"],candidateUsers:[1,"candidateUsers"],selectedUsers:[2,"selectedUsers"],onlineOfflineStatuses$:[3,"onlineOfflineStatuses$"]},{userSelected:"userSelected"})],function(t,e){var n=e.component;t(e,1,0,"Contacts",n.filteredCandidateContacts,n.selectedUsers,n.onlineOfflineStatuses$)},null)}function H(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"app-candidate-group",[["name","Collaborators"]],null,[[null,"userSelected"]],function(t,e,n){var i=!0;return"userSelected"===e&&(i=!1!==t.component.handleUserSelected(n)&&i),i},F,M)),i["\u0275did"](1,49152,null,0,k.a,[i.ChangeDetectorRef],{name:[0,"name"],candidateUsers:[1,"candidateUsers"],selectedUsers:[2,"selectedUsers"],onlineOfflineStatuses$:[3,"onlineOfflineStatuses$"]},{userSelected:"userSelected"})],function(t,e){var n=e.component;t(e,1,0,"Collaborators",n.filteredCandidateCollaborators,n.selectedUsers,n.onlineOfflineStatuses$)},null)}function q(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"app-candidate-group",[["name","Team Members"]],null,[[null,"userSelected"]],function(t,e,n){var i=!0;return"userSelected"===e&&(i=!1!==t.component.handleUserSelected(n)&&i),i},F,M)),i["\u0275did"](1,49152,null,0,k.a,[i.ChangeDetectorRef],{name:[0,"name"],candidateUsers:[1,"candidateUsers"],selectedUsers:[2,"selectedUsers"],onlineOfflineStatuses$:[3,"onlineOfflineStatuses$"]},{userSelected:"userSelected"})],function(t,e){var n=e.component;t(e,1,0,"Team Members",n.filteredCandidateTeamMembers,n.selectedUsers,n.onlineOfflineStatuses$)},null)}function X(t){return i["\u0275vid"](2,[(t()(),i["\u0275and"](16777216,null,null,1,null,B)),i["\u0275did"](1,16384,null,0,y.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,G)),i["\u0275did"](3,16384,null,0,y.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,V)),i["\u0275did"](5,16384,null,0,y.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,H)),i["\u0275did"](7,16384,null,0,y.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,q)),i["\u0275did"](9,16384,null,0,y.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,n.hasUserSearchAccess),t(e,3,0,!n.team),t(e,5,0,!n.team),t(e,7,0,!n.team),t(e,9,0,n.team&&("team"===n.thread.threadType||"team"===n.thread.context.type))},null)}var Y=n("2H+Z"),Q=n("+qCR"),W=n("CAys"),Z=n("vwlU");n("Eg4/"),n("eCtd"),n.d(e,"a",function(){return K}),n.d(e,"b",function(){return tt});var K=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{background-color:#fff;display:flex;flex:1 1 100%;flex-direction:column}.SearchStatus[_ngcontent-%COMP%]{font-size:13px;line-height:1.2;font-weight:400}"]],data:{}});function J(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"fl-bit",[["class","SearchStatus"]],null,null,null,r.b,r.a)),i["\u0275did"](1,49152,null,0,a.a,[],null,null),(t()(),i["\u0275ted"](2,0,[" "," "]))],null,function(t,e){t(e,2,0,e.component.searchStatus)})}function tt(t){return i["\u0275vid"](2,[i["\u0275qud"](402653184,1,{searchComponent:0}),i["\u0275qud"](402653184,2,{candidateGroupListComponent:0}),(t()(),i["\u0275eld"](2,0,null,null,10,"app-overlay-header",[],null,null,null,s.b,s.a)),i["\u0275did"](3,49152,null,0,o.a,[],null,null),(t()(),i["\u0275eld"](4,0,null,0,3,"fl-bit",[],[[1,"data-margin-right",0],[1,"data-margin-bottom",0],[1,"data-margin-right-tablet",0],[1,"data-margin-bottom-tablet",0],[1,"data-margin-right-desktop",0],[1,"data-margin-bottom-desktop",0]],null,null,r.b,r.a)),i["\u0275did"](5,16384,null,0,c.b,[],{flMarginBottom:[0,"flMarginBottom"]},null),i["\u0275did"](6,49152,null,0,a.a,[],null,null),(t()(),i["\u0275ted"](-1,0,[" Add Users "])),(t()(),i["\u0275eld"](8,0,null,0,2,"app-search",[["flTrackingSection","GroupchatSearch"]],null,null,null,v,g)),i["\u0275did"](9,16384,null,0,m.a,[],{flTrackingSection:[0,"flTrackingSection"]},null),i["\u0275did"](10,49152,[[1,4]],0,b.a,[],{inputControl:[0,"inputControl"]},null),(t()(),i["\u0275and"](16777216,null,0,1,null,J)),i["\u0275did"](12,16384,null,0,y.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275eld"](13,0,null,null,6,"app-overlay-content",[],null,null,null,j.b,j.a)),i["\u0275did"](14,49152,null,0,O.a,[],null,null),(t()(),i["\u0275eld"](15,0,null,0,4,"app-candidate-group-list",[],null,[[null,"modifyMembers"]],function(t,e,n){var i=!0;return"modifyMembers"===e&&(i=!1!==t.component.modifyMembers(n)&&i),i},X,N)),i["\u0275did"](16,573440,[[2,4]],0,z.a,[],{candidateBidders:[0,"candidateBidders"],candidateContacts:[1,"candidateContacts"],candidateCollaborators:[2,"candidateCollaborators"],candidateUserSearch:[3,"candidateUserSearch"],candidateTeamMembers:[4,"candidateTeamMembers"],onlineOfflineStatuses$:[5,"onlineOfflineStatuses$"],hasUserSearchAccess:[6,"hasUserSearchAccess"],searchText:[7,"searchText"],thread:[8,"thread"],team:[9,"team"]},{modifyMembers:"modifyMembers"}),i["\u0275pid"](131072,y.AsyncPipe,[i.ChangeDetectorRef]),i["\u0275pid"](131072,y.AsyncPipe,[i.ChangeDetectorRef]),i["\u0275pid"](131072,y.AsyncPipe,[i.ChangeDetectorRef]),(t()(),i["\u0275eld"](20,0,null,null,13,"app-overlay-controls",[],null,null,null,Y.b,Y.a)),i["\u0275did"](21,49152,null,0,Q.a,[],null,null),(t()(),i["\u0275eld"](22,0,null,0,5,"app-overlay-controls-item",[],null,null,null,W.b,W.a)),i["\u0275did"](23,49152,null,0,Z.a,[],null,null),(t()(),i["\u0275eld"](24,0,null,0,3,"fl-button",[["display","block"],["flTrackingLabel","CloseManagementView"]],[[2,"ButtonGroupFirst",null],[2,"ButtonGroupMiddle",null],[2,"ButtonGroupLast",null],[1,"data-busy",0],[1,"data-color",0],[1,"data-display",0],[1,"data-size",0],[1,"data-size-tablet",0],[1,"data-size-desktop",0],[1,"disabled",0]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.handleCloseView()&&i),i},x.b,x.a)),i["\u0275did"](25,573440,null,0,T.b,[],{color:[0,"color"],display:[1,"display"]},null),i["\u0275did"](26,4407296,null,0,h.a,[i.ElementRef,i.Renderer2,p.a,f.a,[2,m.a]],{flTrackingLabel:[0,"flTrackingLabel"]},null),(t()(),i["\u0275ted"](-1,0,[" Back "])),(t()(),i["\u0275eld"](28,0,null,0,5,"app-overlay-controls-item",[],null,null,null,W.b,W.a)),i["\u0275did"](29,49152,null,0,Z.a,[],null,null),(t()(),i["\u0275eld"](30,0,null,0,3,"fl-button",[["class","ControlButton"],["display","block"],["flTrackingLabel","AddUsersToChat"]],[[2,"ButtonGroupFirst",null],[2,"ButtonGroupMiddle",null],[2,"ButtonGroupLast",null],[1,"data-busy",0],[1,"data-color",0],[1,"data-display",0],[1,"data-size",0],[1,"data-size-tablet",0],[1,"data-size-desktop",0],[1,"disabled",0]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.handleAdd()&&i),i},x.b,x.a)),i["\u0275did"](31,573440,null,0,T.b,[],{color:[0,"color"],display:[1,"display"],disabled:[2,"disabled"]},null),i["\u0275did"](32,4407296,null,0,h.a,[i.ElementRef,i.Renderer2,p.a,f.a,[2,m.a]],{flTrackingLabel:[0,"flTrackingLabel"]},null),(t()(),i["\u0275ted"](-1,0,[" Chat "]))],function(t,e){var n=e.component;t(e,5,0,n.Margin.XXXSMALL),t(e,9,0,"GroupchatSearch"),t(e,10,0,n.searchFormControl),t(e,12,0,n.isRecruiter),t(e,16,0,n.candidateBidders,n.candidateContacts,n.candidateCollaborators,i["\u0275unv"](e,16,3,i["\u0275nov"](e,17).transform(n.candidateUserSearch$)),i["\u0275unv"](e,16,4,i["\u0275nov"](e,18).transform(n.candidateTeamMembers$)),n.onlineOfflineStatuses$,n.isRecruiter,i["\u0275unv"](e,16,7,i["\u0275nov"](e,19).transform(n.searchText$)),n.thread,n.team),t(e,25,0,n.ButtonColor.DEFAULT,"block"),t(e,26,0,"CloseManagementView"),t(e,31,0,n.ButtonColor.SECONDARY,"block",0===n.selectedUsers.size),t(e,32,0,"AddUsersToChat")},function(t,e){t(e,4,0,i["\u0275nov"](e,5).flMarginRight,i["\u0275nov"](e,5).flMarginBottom,i["\u0275nov"](e,5).flMarginRightTablet,i["\u0275nov"](e,5).flMarginBottomTablet,i["\u0275nov"](e,5).flMarginRightDesktop,i["\u0275nov"](e,5).flMarginBottomDesktop),t(e,24,0,i["\u0275nov"](e,25).buttonGroupFirst,i["\u0275nov"](e,25).buttonGroupMiddle,i["\u0275nov"](e,25).buttonGroupLast,i["\u0275nov"](e,25).busy,i["\u0275nov"](e,25).color,i["\u0275nov"](e,25).display,i["\u0275nov"](e,25).size,i["\u0275nov"](e,25).sizeTablet,i["\u0275nov"](e,25).sizeDesktop,i["\u0275nov"](e,25).attrDisabled),t(e,30,0,i["\u0275nov"](e,31).buttonGroupFirst,i["\u0275nov"](e,31).buttonGroupMiddle,i["\u0275nov"](e,31).buttonGroupLast,i["\u0275nov"](e,31).busy,i["\u0275nov"](e,31).color,i["\u0275nov"](e,31).display,i["\u0275nov"](e,31).size,i["\u0275nov"](e,31).sizeTablet,i["\u0275nov"](e,31).sizeDesktop,i["\u0275nov"](e,31).attrDisabled)})}},antG:function(t,e,n){"use strict";var i=n("tVL2"),r=n("zEgj");function a(t){return Object(r.a)(t)}function s(t,e){switch(void 0===t&&(t={}),e.type){case"API_FETCH_SUCCESS":if("threadUsers"===e.payload.type){var n=e.payload,r=n.result,s=n.ref,o=n.order;return r.users?Object(i.q)(t,Object(i.y)(r.users,a),o,s):t}if("messages"===e.payload.type||"threads"===e.payload.type||"threadProjects"===e.payload.type){var c=e.payload.result.users;return c?(s=e.payload.ref,Object(i.r)(t,Object(i.y)(c,a),{path:{collection:"threadUsers",authUid:s.path.authUid}})):t}return t;default:return t}}n.d(e,"a",function(){return s})},asu8:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("tVL2");function r(){return{defaultOrder:{field:"id",direction:i.c.DESC},fetch:function(t,e,n){return{endpoint:"users/0.1/users",params:{support_status_details:"true",online_offline_details:"true",avatar:"true",users:(e||[]).map(i.x).concat(Object(i.k)(n,"id")),usernames:Object(i.k)(n,"username"),status:"true"}}}}}},b1V1:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n("CcnG"),r=n("rMUQ"),a=n("vYTZ"),s=n("5I7X"),o=n("vUsZ"),c=n("F3Eq"),u=n("b6KT"),d=n("DGvs"),l=function(){function t(){this.FontColor=o.a,this.FontSize=o.b,this.IconColor=a.c,this.IconSize=a.d,this.HoverColor=a.a,this.LinkColor=s.a,this.LinkWeight=s.e,this.TooltipPosition=c.a,this.focusState=2,this.isFocused=!1,this.closeChat=new i.EventEmitter,this.handleSettingsHeaderClick=new i.EventEmitter,this.handleGroupchatHeaderClick=new i.EventEmitter,this.makingCall=new i.EventEmitter,this.isUnread=!1,this.isSupportChat=!1,this.isThreadSupportSession=!1,this.isCurrentUserSupport=!1,this.threadHasContext=!1,this.showLastSeen=!1}return t.getSupportQueueTitle=function(t){switch(t.supportStatus.type){case"technical":return"Technical";case"assisted":return"Recruiter Chat";case"general":return"General Chat";case"local":return"Local Jobs";case"payment_satisfaction":return"Payment Satisfaction";case"project_management":return"Project Management";case"success_manager":return"Success Manager";default:return Object(r.assertNever)(t.supportStatus.type)}},t.prototype.ngOnChanges=function(){this.otherUser=this.otherMembers[0],this.supportUser=this.getSupportUser(),this.otherMembers&&this.otherMembers.length>0&&(this.isSupportChat=void 0!==this.supportUser||"admin_preferred_chat"===this.thread.threadType,this.isGroupChat="group"===this.thread.threadType,this.isTeamChat="team"===this.thread.threadType||"team_official"===this.thread.threadType||"team"===this.thread.context.type),this.isThreadSupportSession=this.thread.context&&"support_session"===this.thread.context.type,this.isUnread=this.thread.messageUnreadCount>0,this.isCurrentUserSupport=Object(u.g)(this.currentUser),this.setTitles(),this.isFocused=0===this.focusState||1===this.focusState},t.prototype.getSupportUser=function(){return Object(u.g)(this.currentUser)?this.currentUser:this.otherMembers?this.otherMembers.find(u.g):void 0},t.prototype.setTitles=function(){if(this.showLastSeen=!1,"group"===this.thread.threadType||"team"===this.thread.threadType){var e=this.otherMembers.map(function(t){return t.displayName}).join(", ");this.project&&"project"===this.thread.context.type?(this.title=this.project.title,this.titleLink="/projects/"+this.project.seoUrl,this.secondaryTitle=e):this.contest&&"contest"===this.thread.context.type?(this.title=this.contest.title,this.titleLink=this.contest.seoUrl,this.secondaryTitle=e):(this.title=e,this.titleLink=void 0,this.secondaryTitle=void 0)}else this.isSupportChat&&this.isCurrentUserSupport&&this.supportUser&&this.otherUser?(this.title=this.otherUser.displayName,this.titleLink=this.otherUser.profileUrl,this.secondaryTitle=this.otherUser.username===this.otherUser.displayName?t.getSupportQueueTitle(this.supportUser):"("+this.otherUser.username+")"):this.isSupportChat&&this.supportUser?(this.title=this.supportUser.displayName,this.titleLink=void 0,this.secondaryTitle="Freelancer Staff"):this.team&&"team_official"===this.thread.threadType?(this.title=this.team.name,this.titleLink="/teams/"+this.team.id,this.secondaryTitle="Official Group Chat"):this.otherUser?(this.title=this.otherUser.displayName,this.titleLink=this.otherUser.profileUrl,this.titleParams=this.project?{ref_project_id:this.project.id}:void 0,this.secondaryTitle=void 0,this.otherUser.onlineOfflineStatus&&void 0!==this.otherUser.onlineOfflineStatus.lastUpdatedTimestamp&&"offline"===this.otherUser.onlineOfflineStatus.status&&(this.lastSeenDate=new Date(this.otherUser.onlineOfflineStatus.lastUpdatedTimestamp),this.showLastSeen=!0)):(this.title="Private Chat",this.titleLink=void 0,this.secondaryTitle=void 0)},t.prototype.canManageChatMembers=function(){return!!("team"===this.thread.context.type&&"team_official"!==this.thread.threadType||"team"===this.thread.threadType&&this.team)||"team_official"!==this.thread.threadType&&(this.isThreadOwner&&!this.isSupportChat||this.isCurrentUserSupport)},t.prototype.handleBlockedClick=function(t){t.stopPropagation()},t.prototype.handleClose=function(t){t.stopPropagation(),this.closeChat.emit()},t.prototype.handleSettingsButtonClick=function(t){t.stopPropagation(),this.handleSettingsHeaderClick.emit()},t.prototype.handleGroupchatButtonClick=function(t){t.stopPropagation(),this.handleGroupchatHeaderClick.emit()},t.prototype.handleAudioCallClick=function(t){t.stopPropagation(),this.startCall("Audio"),this.makingCall.emit(!0)},t.prototype.handleVideoCallClick=function(t){t.stopPropagation(),this.startCall("Video"),this.makingCall.emit(!0)},t.prototype.startCall=function(t){Object(d.a)(t,this.thread.id,!1)},t}()},b6KT:function(t,e,n){"use strict";n.d(e,"j",function(){return d}),n.d(e,"f",function(){return l}),n.d(e,"c",function(){return h}),n.d(e,"k",function(){return p}),n.d(e,"h",function(){return m}),n.d(e,"l",function(){return b}),n.d(e,"g",function(){return g}),n.d(e,"i",function(){return v}),n.d(e,"a",function(){return y}),n.d(e,"e",function(){return j}),n.d(e,"b",function(){return O}),n.d(e,"d",function(){return S});var i=n("rMUQ"),r=n("aK1y"),a=n("67Y/"),s=n("VnD/"),o=function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},c="WEBAPP_CHATS_v0.0.6_last_user",u=6048e5,d=function(t,e){if(void 0===t||void 0===e)return!1;if(t.id===e.id)return!0;var n="none"!==t.context.type&&"none"!==e.context.type&&t.context.type===e.context.type&&t.context.id===e.context.id||"none"===t.context.type&&"none"===e.context.type,i=t.threadType===e.threadType,r=new Set(e.members),a=t.members.every(function(t){return r.has(t)})&&t.members.length===e.members.length;return n&&i&&a};function l(t,e){return void 0!==t&&void 0!==e&&t.message===e.message&&t.messageId===e.messageId&&t.threadId===e.threadId&&t.timeCreated===e.timeCreated}function h(t,e,n){void 0===e&&(e="");var i=Date.now(),a={attachments:[],clientMessageId:i,fromUser:n,id:i,message:e,messageSource:"chat_box",threadId:t.id,timeCreated:Date.now(),sendStatus:r.a.SENDING};return o({},t,{message:a,isFake:!1})}function p(t){window.localStorage.getItem(c)!==t&&(window.localStorage.setItem(c,t),window.localStorage.removeItem("webappChats"))}var f=function(){return{min:{height:210,width:260},max:{height:window.innerHeight-114-40,width:620}}},m=function(t){var e=f(),n={height:t.height,width:t.width};return t.height>e.max.height?n.height=e.max.height:t.height<e.min.height&&(n.height=e.min.height),t.width>e.max.width?n.width=e.max.width:t.width<e.min.width&&(n.width=e.min.width),n},b=function(t){var e=f();return!(t.height>e.max.height||t.height<e.min.height||t.width>e.max.width||t.width<e.min.width)};function g(t){return t&&t.supportStatus&&["assisted","local","payment_satisfaction","project_management","success_manager"].includes(t.supportStatus.type)}function v(t,e){var n=t.reduce(function(t,n){return n.context.type===e&&n.context.id?t.concat([n.context.id.toString()]):t},[]);return Array.from(new Set(n))}function y(t){return{id:t.id,threadType:t.threadType,context:t.context,members:t.members,isFake:t.isFake}}function j(t){return Object(i.jsonStableStringify)(t)||""}function O(t){var e=t.get("webappChatDraftMessages");e&&(Object.keys(e).map(function(t){var n=e[t];n&&n.lastUpdated&&Date.now()-n.lastUpdated>u&&delete e[t]}),t.set("webappChatDraftMessages",e))}function S(t,e){return t.pipe(Object(a.a)(function(t){var n=e.threadIdentifier,r=n.context;if("team"===r.type&&r.id&&t[r.id])return t[r.id];if("project"===r.type&&"team"===n.threadType){var a=Object(i.keyBy)(Object.values(t),function(t){return t.ownerUserId}),s=Object.keys(a).find(function(t){return e.threadIdentifier.members.includes(Object(i.toNumber)(t))});if(s)return a[Object(i.toNumber)(s)]}}),Object(s.a)(i.isDefined))}},bOER:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var i=n("CcnG"),r=n("vYTZ"),a=n("pTqS"),s=n("kGt0"),o=n("vUsZ"),c=n("26FU"),u=n("67Y/"),d=function(){function t(t){this.datastore=t,this.Margin=s.a,this.FontColor=o.a,this.FontSize=o.b,this.FontType=o.d,this.FontWeight=o.e,this.IconSize=r.d,this.ListItemPadding=a.b,this.ListItemType=a.c,this.chatOptionsMode=!1,this.archiveChatToggle=new i.EventEmitter,this.blockChatToggle=new i.EventEmitter,this.muteChatToggle=new i.EventEmitter,this.userAdd=new i.EventEmitter,this.userRemove=new i.EventEmitter,this.currentLimit=50,this.attachmentsLimitSubject$=new c.a(this.currentLimit),this.whitelistUsers=[26088556,31141502]}return t.prototype.ngOnInit=function(){var t=this;this.resetSubscription=this.threadId$.subscribe(function(){t.currentLimit=50,t.attachmentsLimitSubject$.next(t.currentLimit)}),this.attachmentsCollection=this.datastore.collection("messageAttachments",function(e){return e.where("threadId","==",t.threadId$).limit(t.attachmentsLimitSubject$)}),this.canLoadMore$=this.attachmentsCollection.valueChanges().pipe(Object(u.a)(function(e){return e.length>=t.currentLimit}))},t.prototype.ngOnDestroy=function(){this.resetSubscription.unsubscribe()},t.prototype.ngOnChanges=function(t){"currentUser"in t&&(this.isWhitelistUser=this.whitelistUsers.includes(t.currentUser.currentValue.id))},t.prototype.handleLoadAttachments=function(){this.currentLimit+=50,this.attachmentsLimitSubject$.next(this.currentLimit)},t.prototype.identifyAttachment=function(t,e){return e.id},t.prototype.onArchiveChatToggle=function(){this.archiveChatToggle.emit()},t.prototype.onBlockChatToggle=function(){this.blockChatToggle.emit()},t.prototype.onMuteChatToggle=function(){this.muteChatToggle.emit()},t.prototype.onAddPeopleClick=function(){this.userAdd.emit()},t.prototype.handleUserRemoved=function(t){this.userRemove.emit(t)},t}()},cV7A:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("CcnG"),r=n("rMUQ"),a=n("kGt0"),s=n("ce0w"),o=n("vUsZ"),c=n("b6KT"),u=function(){function t(t,e){this.tracking=t,this.elementRef=e,this.FontColor=o.a,this.Margin=a.a,this.SpinnerSize=s.c,this.TextAlign=o.f,this.chatBoxMode=!0,this.showLoadingMoreSpinner=!1,this.resendMessage=new i.EventEmitter,this.loadMoreMessages=new i.EventEmitter,this.psbConfig={},this.showLoadingSpinner=!0,this.showNewMessageFloatingAction=!1}return t.prototype.ngAfterViewInit=function(){this.scrollToBottom()},t.prototype.ngOnChanges=function(t){var e=this;if(t.messages&&(!t.messages.previousValue||this.isAtBottom()||this.isMessageSent(t.messages.currentValue,t.messages.previousValue))&&setTimeout(function(){return e.scrollToBottom()},0),t.messages&&this.isMessageReceived(t.messages.currentValue,t.messages.previousValue)&&!this.isAtBottom()&&(this.showNewMessageFloatingAction=!0),t.thread||t.messages){var n=this.messages&&this.messages.length>0?this.messages[0].threadId:void 0;this.showLoadingSpinner=!this.thread||!this.thread.isFake&&!this.messages||!this.thread.isFake&&!!n&&this.thread.id!==n}},t.prototype.ignoreSelection=function(t){var e=window.getSelection();e&&e.rangeCount&&!e.getRangeAt(0).collapsed&&t.stopPropagation()},t.prototype.handleMessageResend=function(t){this.resendMessage.emit(t)},t.prototype.handleShowNewMessages=function(){this.scrollToBottom(),this.tracking.track("user_action",{section:this.chatBoxMode?"chatbox":"inbox",subsection:"message_content",label:"show_new_messages"})},t.prototype.isMessageReceived=function(t,e){var n=t?t[t.length-1]:void 0,i=e?e[e.length-1]:void 0;return!!n&&n.fromUser!==Object(r.toNumber)(this.currentUserId)&&!Object(c.f)(n,i)},t.prototype.isMessageSent=function(t,e){var n=t[t.length-1],i=e[e.length-1];return n&&n.fromUser?!Object(c.f)(n,i)&&n.fromUser===Object(r.toNumber)(this.currentUserId):!Object(c.f)(n,i)},t.prototype.scrollToBottom=function(){this.psbComponent.directiveRef&&this.psbComponent.directiveRef.scrollToBottom()},t.prototype.isAtBottom=function(){if(!this.messageComponents||0===this.messageComponents.length||!this.psbComponent.directiveRef)return!0;var t=this.psbComponent.directiveRef.geometry(),e=this.messageComponents.last.nativeElement.clientHeight,n=this.elementRef.nativeElement.clientHeight;return Object(r.toNumber)(t.y)+Object(r.toNumber)(e)+Object(r.toNumber)(n)>=t.h},t.prototype.handleScrollAtBottom=function(){this.showNewMessageFloatingAction=!1},t.prototype.identifyMessage=function(t,e){return e.id||e.clientMessageId},t.prototype.handleLoadMessages=function(){this.loadMoreMessages.emit(!0)},t}()},ccnH:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("CcnG"),r=n("vYTZ"),a=n("vUsZ"),s=function(){function t(){this.FontType=a.d,this.IconColor=r.c,this.IconSize=r.d,this.HoverColor=r.a,this.removeFailedUpload=new i.EventEmitter,this.progressBarWidth="0%"}return t.prototype.ngOnChanges=function(t){"progress"in t&&(this.progressBarWidth=this.getProgressBarWidth(t.progress.currentValue))},t.prototype.removeAttachment=function(){this.removeFailedUpload.emit(this.id)},t.prototype.getProgressBarWidth=function(t){return t&&void 0!==t.loaded&&void 0!==t.total?Math.round(100*t.loaded/t.total)+"%":"0%"},t}()},d3Ob:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("tVL2"),r=n("+qo5"),a=n("JwJb"),s=function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function o(t,e){switch(void 0===t&&(t={}),e.type){case"API_FETCH_SUCCESS":if("users"===e.payload.type){var n=e.payload,o=n.result,c=n.ref,u=n.order;return o.users?Object(i.q)(t,Object(i.y)(o.users,a.a),u,c):t}return t;case"WS_MESSAGE":if(c={path:{collection:"users",authUid:e.payload.toUserId}},"onlineoffline"===e.payload.parent_type&&"statusget"===e.payload.type){var d=e.payload.data;return Object(i.B)(t,Object.keys(d),function(t){var e=Object(r._transformOnlineOfflineStatusType)(d[t.id]);return s({},t,{onlineOfflineStatus:{status:e,lastUpdatedTimestamp:t.onlineOfflineStatus&&t.onlineOfflineStatus.status===e?t.onlineOfflineStatus.lastUpdatedTimestamp:void 0}})},c)}if("onlineoffline"===e.payload.parent_type&&"statuschange"===e.payload.type){var l=e.payload.data,h=Object(i.u)(t,c.path,l.user.toString());if(h)return Object(i.r)(t,Object(i.y)([h],function(t){return s({},t,{onlineOfflineStatus:{status:Object(r._transformOnlineOfflineStatusType)(l.to),lastUpdatedTimestamp:Date.now()}})}),c)}return t;default:return t}}},f3kX:function(t,e,n){"use strict";var i;n.d(e,"a",function(){return i}),function(t){t.MOBILE="(min-width: 480px)",t.TABLET="(min-width: 768px)",t.DESKTOP_SMALL="(min-width: 960px)",t.DESKTOP_LARGE="(min-width: 1200px)",t.DESKTOP_XLARGE="(min-width: 1440px)",t.DESKTOP_XXLARGE="(min-width: 1600px)",t.DESKTOP_XXXLARGE="(min-width: 2560px)"}(i||(i={}))},grJo:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("vUsZ"),r=function(){return function(){this.FontType=i.d,this.FontSize=i.b}}()},h5VB:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},iXb4:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return c});var i=n("CcnG"),r=n("bse0"),a=n("Ip0R"),s=i["\u0275crt"]({encapsulation:2,styles:["\n\nperfect-scrollbar {\n  position: relative;\n\n  display: block;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  max-width: 100%;\n  max-height: 100%;\n}\n\nperfect-scrollbar[hidden] {\n  display: none;\n}\n\nperfect-scrollbar[fxflex] {\n  display: flex;\n  flex-direction: column;\n  height: auto;\n  min-width: 0;\n  min-height: 0;\n\n  -webkit-box-direction: column;\n  -webkit-box-orient: column;\n}\n\nperfect-scrollbar[fxflex] > .ps {\n  -ms-flex: 1 1 auto;\n\n  flex: 1 1 auto;\n  width: auto;\n  height: auto;\n  min-width: 0;\n  min-height: 0;\n\n  -webkit-box-flex: 1;\n}\n\nperfect-scrollbar[fxlayout] > .ps,\nperfect-scrollbar[fxlayout] > .ps > .ps-content {\n  display: flex;\n\n  -ms-flex: 1 1 auto;\n\n  flex: 1 1 auto;\n  flex-direction: inherit;\n  align-items: inherit;\n  align-content: inherit;\n  justify-content: inherit;\n  width: 100%;\n  height: 100%;\n\n  -webkit-box-align: inherit;\n  -webkit-box-direction: inherit;\n  -webkit-box-flex: 1;\n  -webkit-box-orient: inherit;\n  -webkit-box-pack: inherit;\n}\n\nperfect-scrollbar[fxlayout='row'] > .ps,\nperfect-scrollbar[fxlayout='row'] > .ps > .ps-content, {\n  flex-direction: row !important;\n\n  -webkit-box-direction: row !important;\n  -webkit-box-orient: row !important;\n}\n\nperfect-scrollbar[fxlayout='column'] > .ps,\nperfect-scrollbar[fxlayout='column'] > .ps > .ps-content {\n  flex-direction: column !important;\n\n  -webkit-box-direction: column !important;\n  -webkit-box-orient: column !important;\n}\n\nperfect-scrollbar > .ps {\n  position: static;\n\n  display: block;\n  width: inherit;\n  height: inherit;\n  max-width: inherit;\n  max-height: inherit;\n}\n\nperfect-scrollbar > .ps > .ps-overlay {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n\n  display: block;\n  overflow: hidden;\n\n  pointer-events: none;\n}\n\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-top,\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-left,\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-right,\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-bottom {\n  position: absolute;\n\n  opacity: 0;\n\n  transition: opacity 300ms ease-in-out;\n}\n\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-top,\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-bottom {\n  left: 0;\n\n  min-width: 100%;\n  min-height: 24px;\n}\n\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-left,\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-right {\n  top: 0;\n\n  min-width: 24px;\n  min-height: 100%;\n}\n\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-top {\n  top: 0;\n}\n\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-left {\n  left: 0;\n}\n\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-right {\n  right: 0;\n}\n\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-bottom {\n  bottom: 0;\n}\n\nperfect-scrollbar > .ps.ps--active-y > .ps__rail-y {\n  top: 0 !important;\n  right: 0 !important;\n  left: auto !important;\n\n  width: 10px;\n\n  cursor: default;\n\n  transition:\n    width 200ms linear,\n    opacity 200ms linear,\n    background-color 200ms linear;\n}\n\nperfect-scrollbar > .ps.ps--active-y > .ps__rail-y:hover,\nperfect-scrollbar > .ps.ps--active-y > .ps__rail-y.ps--clicking {\n  width: 15px;\n}\n\nperfect-scrollbar > .ps.ps--active-x > .ps__rail-x {\n  top: auto !important;\n  bottom: 0 !important;\n  left: 0 !important;\n\n  height: 10px;\n\n  cursor: default;\n\n  transition:\n    height 200ms linear,\n    opacity 200ms linear,\n    background-color 200ms linear;\n}\n\nperfect-scrollbar > .ps.ps--active-x > .ps__rail-x:hover,\nperfect-scrollbar > .ps.ps--active-x > .ps__rail-x.ps--clicking {\n  height: 15px;\n}\n\nperfect-scrollbar > .ps.ps--active-x.ps--active-y > .ps__rail-y {\n  margin: 0 0 10px;\n}\n\nperfect-scrollbar > .ps.ps--active-x.ps--active-y > .ps__rail-x {\n  margin: 0 10px 0 0;\n}\n\nperfect-scrollbar > .ps.ps--scrolling-y > .ps__rail-y,\nperfect-scrollbar > .ps.ps--scrolling-x > .ps__rail-x {\n  opacity: 0.9;\n\n  background-color: #eee;\n}\n\nperfect-scrollbar.ps-show-always > .ps.ps--active-y > .ps__rail-y,\nperfect-scrollbar.ps-show-always > .ps.ps--active-x > .ps__rail-x {\n  opacity: 0.6;\n}\n\nperfect-scrollbar.ps-show-active > .ps.ps--active-y > .ps-overlay:not(.ps-at-top) .ps-indicator-top {\n  opacity: 1;\n\n  background: linear-gradient(to bottom, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active > .ps.ps--active-y > .ps-overlay:not(.ps-at-bottom) .ps-indicator-bottom {\n  opacity: 1;\n\n  background: linear-gradient(to top, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active > .ps.ps--active-x > .ps-overlay:not(.ps-at-left) .ps-indicator-left {\n  opacity: 1;\n\n  background: linear-gradient(to right, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active > .ps.ps--active-x > .ps-overlay:not(.ps-at-right) .ps-indicator-right {\n  opacity: 1;\n\n  background: linear-gradient(to left, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-y > .ps-overlay.ps-at-top .ps-indicator-top {\n  background: linear-gradient(to bottom, rgba(170, 170, 170, 0.5) 0%, rgba(170, 170, 170, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-y > .ps-overlay.ps-at-bottom .ps-indicator-bottom {\n  background: linear-gradient(to top, rgba(170, 170, 170, 0.5) 0%, rgba(170, 170, 170, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-x > .ps-overlay.ps-at-left .ps-indicator-left {\n  background: linear-gradient(to right, rgba(170, 170, 170, 0.5) 0%, rgba(170, 170, 170, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-x > .ps-overlay.ps-at-right .ps-indicator-right {\n  background: linear-gradient(to left, rgba(170, 170, 170, 0.5) 0%, rgba(170, 170, 170, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-y > .ps-overlay.ps-at-top .ps-indicator-top.ps-indicator-show,\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-y > .ps-overlay.ps-at-bottom .ps-indicator-bottom.ps-indicator-show,\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-x > .ps-overlay.ps-at-left .ps-indicator-left.ps-indicator-show,\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-x > .ps-overlay.ps-at-right .ps-indicator-right.ps-indicator-show {\n  opacity: 1;\n}\n","\n.ps {\n  overflow: hidden !important;\n  overflow-anchor: none;\n  -ms-overflow-style: none;\n  touch-action: auto;\n  -ms-touch-action: auto;\n}\n\n\n.ps__rail-x {\n  display: none;\n  opacity: 0;\n  transition: background-color .2s linear, opacity .2s linear;\n  -webkit-transition: background-color .2s linear, opacity .2s linear;\n  height: 15px;\n  \n  bottom: 0px;\n  \n  position: absolute;\n}\n\n.ps__rail-y {\n  display: none;\n  opacity: 0;\n  transition: background-color .2s linear, opacity .2s linear;\n  -webkit-transition: background-color .2s linear, opacity .2s linear;\n  width: 15px;\n  \n  right: 0;\n  \n  position: absolute;\n}\n\n.ps--active-x > .ps__rail-x,\n.ps--active-y > .ps__rail-y {\n  display: block;\n  background-color: transparent;\n}\n\n.ps:hover > .ps__rail-x,\n.ps:hover > .ps__rail-y,\n.ps--focus > .ps__rail-x,\n.ps--focus > .ps__rail-y,\n.ps--scrolling-x > .ps__rail-x,\n.ps--scrolling-y > .ps__rail-y {\n  opacity: 0.6;\n}\n\n.ps .ps__rail-x:hover,\n.ps .ps__rail-y:hover,\n.ps .ps__rail-x:focus,\n.ps .ps__rail-y:focus,\n.ps .ps__rail-x.ps--clicking,\n.ps .ps__rail-y.ps--clicking {\n  background-color: #eee;\n  opacity: 0.9;\n}\n\n\n.ps__thumb-x {\n  background-color: #aaa;\n  border-radius: 6px;\n  transition: background-color .2s linear, height .2s ease-in-out;\n  -webkit-transition: background-color .2s linear, height .2s ease-in-out;\n  height: 6px;\n  \n  bottom: 2px;\n  \n  position: absolute;\n}\n\n.ps__thumb-y {\n  background-color: #aaa;\n  border-radius: 6px;\n  transition: background-color .2s linear, width .2s ease-in-out;\n  -webkit-transition: background-color .2s linear, width .2s ease-in-out;\n  width: 6px;\n  \n  right: 2px;\n  \n  position: absolute;\n}\n\n.ps__rail-x:hover > .ps__thumb-x,\n.ps__rail-x:focus > .ps__thumb-x,\n.ps__rail-x.ps--clicking .ps__thumb-x {\n  background-color: #999;\n  height: 11px;\n}\n\n.ps__rail-y:hover > .ps__thumb-y,\n.ps__rail-y:focus > .ps__thumb-y,\n.ps__rail-y.ps--clicking .ps__thumb-y {\n  background-color: #999;\n  width: 11px;\n}\n\n\n@supports (-ms-overflow-style: none) {\n  .ps {\n    overflow: auto !important;\n  }\n}\n\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .ps {\n    overflow: auto !important;\n  }\n}\n"],data:{}});function o(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,4,"div",[["class","ps-overlay"]],[[2,"ps-at-top",null],[2,"ps-at-left",null],[2,"ps-at-right",null],[2,"ps-at-bottom",null]],null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,0,"div",[["class","ps-indicator-top"]],[[2,"ps-indicator-show",null]],null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,0,"div",[["class","ps-indicator-left"]],[[2,"ps-indicator-show",null]],null,null,null,null)),(t()(),i["\u0275eld"](3,0,null,null,0,"div",[["class","ps-indicator-right"]],[[2,"ps-indicator-show",null]],null,null,null,null)),(t()(),i["\u0275eld"](4,0,null,null,0,"div",[["class","ps-indicator-bottom"]],[[2,"ps-indicator-show",null]],null,null,null,null))],null,function(t,e){var n=e.component;t(e,0,0,n.states.top,n.states.left,n.states.right,n.states.bottom),t(e,1,0,n.indicatorY&&n.interaction),t(e,2,0,n.indicatorX&&n.interaction),t(e,3,0,n.indicatorX&&n.interaction),t(e,4,0,n.indicatorY&&n.interaction)})}function c(t){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{directiveRef:0}),(t()(),i["\u0275eld"](1,0,null,null,5,"div",[["style","position: static;"]],[[2,"ps",null]],null,null,null,null)),i["\u0275did"](2,999424,[[1,4]],0,r.c,[i.NgZone,i.KeyValueDiffers,i.ElementRef,i.PLATFORM_ID,[2,r.a]],{disabled:[0,"disabled"],config:[1,"config"]},null),(t()(),i["\u0275eld"](3,0,null,null,1,"div",[["class","ps-content"]],null,null,null,null,null)),i["\u0275ncd"](null,0),(t()(),i["\u0275and"](16777216,null,null,1,null,o)),i["\u0275did"](6,16384,null,0,a.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.disabled,n.config),t(e,6,0,n.scrollIndicators)},function(t,e){t(e,1,0,e.component.usePSClass)})}},imNX:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n("CcnG"),r=n("aa9U"),a=n("vYTZ"),s=n("kGt0"),o=n("vUsZ"),c=function(){function t(){this.Margin=s.a,this.ButtonColor=r.a,this.FontColor=o.a,this.FontSize=o.b,this.FontType=o.d,this.IconColor=a.c,this.IconSize=a.d,this.HoverColor=a.a,this.userRemoval=new i.EventEmitter}return t.prototype.showRemoveButton=function(t){return"team"===this.thread.threadType?!!this.team&&t.id!==this.team.ownerUserId&&this.team.members.includes(t.id):"team_official"!==this.thread.threadType&&(t.id===this.currentUser.id||this.isThreadOwner||this.isRecruiter)&&"private_chat"!==this.thread.threadType},t.prototype.showGroupChatHelperText=function(){return 2===this.participants.length&&"none"!==this.thread.context.type&&(this.isThreadOwner&&this.candidatesExist||this.isRecruiter)},t.prototype.handleRemove=function(t){this.userRemoval.emit(t)},t}()},k4JW:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("yZgm");function r(t,e){return t.threads.map(function(t){return Object(i.a)(t,e)})}},lf6A:function(t,e,n){"use strict";n.d(e,"a",function(){return w}),n.d(e,"b",function(){return _});var i=n("mrSG"),r=n("CcnG"),a=n("K9Ia"),s=n("p0ib"),o=n("6blF"),c=n("ny24"),u=n("S1nX"),d=n("VnD/"),l=n("Rney"),h=n("psW0"),p=n("t9fZ"),f=n("67Y/"),m=n("qyHS");function b(t,e,n){return void 0===n&&(n=3),Math.abs(t-e)<n}function g(t,e,n,i){var r={top:t.top,bottom:t.bottom,left:t.left,right:t.right};return e.top&&(r.top+=i),e.bottom&&(r.bottom+=i),e.left&&(r.left+=n),e.right&&(r.right+=n),r.height=r.bottom-r.top,r.width=r.right-r.left,r}function v(t){var e=t.clientY,n=t.rect;return e>=n.top&&e<=n.bottom}function y(t){var e=t.clientX,n=t.rect;return e>=n.left&&e<=n.right}function j(t){var e=t.clientX,n=t.clientY,i=t.allowedEdges,r=t.cursorPrecision,a=t.elm.nativeElement.getBoundingClientRect(),s={};return i.left&&b(e,a.left,r)&&v({clientY:n,rect:a})&&(s.left=!0),i.right&&b(e,a.right,r)&&v({clientY:n,rect:a})&&(s.right=!0),i.top&&b(n,a.top,r)&&y({clientX:e,rect:a})&&(s.top=!0),i.bottom&&b(n,a.bottom,r)&&y({clientX:e,rect:a})&&(s.bottom=!0),s}var O=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function S(t,e){return t.left&&t.top?e.topLeft:t.right&&t.top?e.topRight:t.left&&t.bottom?e.bottomLeft:t.right&&t.bottom?e.bottomRight:t.left||t.right?e.leftOrRight:t.top||t.bottom?e.topOrBottom:""}function C(t){var e=t.initialRectangle,n=t.newRectangle,i={};return Object.keys(t.edges).forEach(function(t){i[t]=(n[t]||0)-(e[t]||0)}),i}var w=function(){function t(t,e,n){this.renderer=t,this.elm=e,this.zone=n,this.resizeEdges={},this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=O,this.resizeCursorPrecision=3,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.resizeStart=new r.EventEmitter,this.resizing=new r.EventEmitter,this.resizeEnd=new r.EventEmitter,this.mouseup=new a.a,this.mousedown=new a.a,this.mousemove=new a.a,this.destroy$=new a.a,this.pointerEventListeners=I.getInstance(t,n)}return t.prototype.ngOnInit=function(){var t,e=this;this.pointerEventListeners.pointerDown.pipe(Object(c.a)(this.destroy$)).subscribe(function(t){e.mousedown.next({clientX:t.clientX,clientY:t.clientY})}),this.pointerEventListeners.pointerMove.pipe(Object(c.a)(this.destroy$)).subscribe(function(t){e.mousemove.next({clientX:t.clientX,clientY:t.clientY,event:t.event})}),this.pointerEventListeners.pointerUp.pipe(Object(c.a)(this.destroy$)).subscribe(function(t){e.mouseup.next({clientX:t.clientX,clientY:t.clientY})});var n=function(){t&&t.clonedNode&&(e.elm.nativeElement.parentElement.removeChild(t.clonedNode),e.renderer.setStyle(e.elm.nativeElement,"visibility","inherit"))},r=this.mousemove.pipe(Object(u.a)());r.pipe(Object(d.a)(function(){return!!t})).subscribe(function(t){t.event.preventDefault()}),r.pipe(Object(l.a)(50)).subscribe(function(n){var i=j({clientX:n.clientX,clientY:n.clientY,elm:e.elm,allowedEdges:e.resizeEdges,cursorPrecision:e.resizeCursorPrecision}),r=Object.assign({},O,e.resizeCursors);if(t){var a=S(t.edges,r);e.renderer.setStyle(document.body,"cursor",a)}else a=S(i,r),e.renderer.setStyle(e.elm.nativeElement,"cursor",a);e.setElementClass(e.elm,"resize-active",!!t),e.setElementClass(e.elm,"resize-left-hover",!0===i.left),e.setElementClass(e.elm,"resize-right-hover",!0===i.right),e.setElementClass(e.elm,"resize-top-hover",!0===i.top),e.setElementClass(e.elm,"resize-bottom-hover",!0===i.bottom)}),this.mousedown.pipe(Object(h.a)(function(n){function a(t){return{clientX:t.clientX-n.clientX,clientY:t.clientY-n.clientY}}var o=function(){var n={x:1,y:1};return t&&(e.resizeSnapGrid.left&&t.edges.left?n.x=+e.resizeSnapGrid.left:e.resizeSnapGrid.right&&t.edges.right&&(n.x=+e.resizeSnapGrid.right),e.resizeSnapGrid.top&&t.edges.top?n.y=+e.resizeSnapGrid.top:e.resizeSnapGrid.bottom&&t.edges.bottom&&(n.y=+e.resizeSnapGrid.bottom)),n};function u(t,e){return{x:Math.ceil(t.clientX/e.x),y:Math.ceil(t.clientY/e.y)}}return Object(s.a)(r.pipe(Object(p.a)(1)).pipe(Object(f.a)(function(t){return[,t]})),r.pipe(Object(m.a)())).pipe(Object(f.a)(function(t){var e=Object(i.__read)(t,2),n=e[0],r=e[1];return[n?a(n):n,a(r)]})).pipe(Object(d.a)(function(t){var e=Object(i.__read)(t,2),n=e[0],r=e[1];if(!n)return!0;var a=o(),s=u(n,a),c=u(r,a);return s.x!==c.x||s.y!==c.y})).pipe(Object(f.a)(function(t){var e=Object(i.__read)(t,2)[1],n=o();return{clientX:Math.round(e.clientX/n.x)*n.x,clientY:Math.round(e.clientY/n.y)*n.y}})).pipe(Object(c.a)(Object(s.a)(e.mouseup,e.mousedown)))})).pipe(Object(d.a)(function(){return!!t})).pipe(Object(f.a)(function(e){return g(t.startingRect,t.edges,e.clientX,e.clientY)})).pipe(Object(d.a)(function(t){return e.allowNegativeResizes||!!(t.height&&t.width&&t.height>0&&t.width>0)})).pipe(Object(d.a)(function(n){return!e.validateResize||e.validateResize({rectangle:n,edges:C({edges:t.edges,initialRectangle:t.startingRect,newRectangle:n})})})).subscribe(function(n){t&&t.clonedNode&&(e.renderer.setStyle(t.clonedNode,"height",n.height+"px"),e.renderer.setStyle(t.clonedNode,"width",n.width+"px"),e.renderer.setStyle(t.clonedNode,"top",n.top+"px"),e.renderer.setStyle(t.clonedNode,"left",n.left+"px")),e.zone.run(function(){e.resizing.emit({edges:C({edges:t.edges,initialRectangle:t.startingRect,newRectangle:n}),rectangle:n})}),t.currentRect=n}),this.mousedown.pipe(Object(f.a)(function(t){return t.edges||j({clientX:t.clientX,clientY:t.clientY,elm:e.elm,allowedEdges:e.resizeEdges,cursorPrecision:e.resizeCursorPrecision})})).pipe(Object(d.a)(function(t){return Object.keys(t).length>0})).subscribe(function(i){t&&n();var r=function(t,e){var n=0,i=0,r=t.nativeElement.style,a=["transform","-ms-transform","-moz-transform","-o-transform"].map(function(t){return r[t]}).find(function(t){return!!t});if(a&&a.includes("translate")&&(n=a.replace(/.*translate\((.*)px, (.*)px\).*/,"$1"),i=a.replace(/.*translate\((.*)px, (.*)px\).*/,"$2")),"absolute"===e)return{height:t.nativeElement.offsetHeight,width:t.nativeElement.offsetWidth,top:t.nativeElement.offsetTop-i,bottom:t.nativeElement.offsetHeight+t.nativeElement.offsetTop-i,left:t.nativeElement.offsetLeft-n,right:t.nativeElement.offsetWidth+t.nativeElement.offsetLeft-n};var s=t.nativeElement.getBoundingClientRect();return{height:s.height,width:s.width,top:s.top-i,bottom:s.bottom-i,left:s.left-n,right:s.right-n,scrollTop:t.nativeElement.scrollTop,scrollLeft:t.nativeElement.scrollLeft}}(e.elm,e.ghostElementPositioning);if(t={edges:i,startingRect:r,currentRect:r},e.enableGhostResize){t.clonedNode=e.elm.nativeElement.cloneNode(!0);var a=Object.assign({},O,e.resizeCursors);e.elm.nativeElement.parentElement.appendChild(t.clonedNode),e.renderer.setStyle(e.elm.nativeElement,"visibility","hidden"),e.renderer.setStyle(t.clonedNode,"position",e.ghostElementPositioning),e.renderer.setStyle(t.clonedNode,"left",t.startingRect.left+"px"),e.renderer.setStyle(t.clonedNode,"top",t.startingRect.top+"px"),e.renderer.setStyle(t.clonedNode,"height",t.startingRect.height+"px"),e.renderer.setStyle(t.clonedNode,"width",t.startingRect.width+"px"),e.renderer.setStyle(t.clonedNode,"cursor",S(t.edges,a)),e.renderer.addClass(t.clonedNode,"resize-ghost-element"),t.clonedNode.scrollTop=t.startingRect.scrollTop,t.clonedNode.scrollLeft=t.startingRect.scrollLeft}e.zone.run(function(){e.resizeStart.emit({edges:C({edges:i,initialRectangle:r,newRectangle:r}),rectangle:g(r,{},0,0)})})}),this.mouseup.subscribe(function(){t&&(e.renderer.removeClass(e.elm.nativeElement,"resize-active"),e.renderer.setStyle(document.body,"cursor",""),e.renderer.setStyle(e.elm.nativeElement,"cursor",""),e.zone.run(function(){e.resizeEnd.emit({edges:C({edges:t.edges,initialRectangle:t.startingRect,newRectangle:t.currentRect}),rectangle:t.currentRect})}),n(),t=null)})},t.prototype.ngOnDestroy=function(){this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()},t.prototype.setElementClass=function(t,e,n){n?this.renderer.addClass(t.nativeElement,e):this.renderer.removeClass(t.nativeElement,e)},t}(),I=function(){function t(t,e){this.pointerDown=new o.a(function(n){var i,r;return e.runOutsideAngular(function(){i=t.listen("document","mousedown",function(t){n.next({clientX:t.clientX,clientY:t.clientY,event:t})}),r=t.listen("document","touchstart",function(t){n.next({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,event:t})})}),function(){i(),r()}}).pipe(Object(u.a)()),this.pointerMove=new o.a(function(n){var i,r;return e.runOutsideAngular(function(){i=t.listen("document","mousemove",function(t){n.next({clientX:t.clientX,clientY:t.clientY,event:t})}),r=t.listen("document","touchmove",function(t){n.next({clientX:t.targetTouches[0].clientX,clientY:t.targetTouches[0].clientY,event:t})})}),function(){i(),r()}}).pipe(Object(u.a)()),this.pointerUp=new o.a(function(n){var i,r,a;return e.runOutsideAngular(function(){i=t.listen("document","mouseup",function(t){n.next({clientX:t.clientX,clientY:t.clientY,event:t})}),r=t.listen("document","touchend",function(t){n.next({clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY,event:t})}),a=t.listen("document","touchcancel",function(t){n.next({clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY,event:t})})}),function(){i(),r(),a()}}).pipe(Object(u.a)())}return t.getInstance=function(e,n){return t.instance||(t.instance=new t(e,n)),t.instance},t}(),_=function(){return function(){}}()},mwpp:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("tVL2");function r(){return{defaultOrder:{field:"order",direction:i.c.ASC},fetch:function(){return{endpoint:"notifications/preferences.php",isGaf:!0}},set:function(t,e){return{endpoint:"notifications/preferences.php",isGaf:!0,asFormData:!0,payload:{settings:JSON.stringify([e])}}}}}},"n+TX":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("CcnG"),r=n("aa9U"),a=function(){function t(){this.ButtonColor=r.a,this.ButtonSize=r.c,this.showControls=!0,this.hideSettingsOverlay=new i.EventEmitter,this.archiveChatToggle=new i.EventEmitter,this.muteChatToggle=new i.EventEmitter,this.blockChatToggle=new i.EventEmitter}return t.prototype.handleCloseView=function(){this.hideSettingsOverlay.emit()},t.prototype.handleArchiveToggle=function(){this.archiveChatToggle.emit(!0)},t.prototype.handleMuteToggle=function(){this.muteChatToggle.emit(!0)},t.prototype.handleBlockToggle=function(){this.blockChatToggle.emit(!0)},t}()},n9BS:function(t,e,n){"use strict";function i(t,e){return"/api/messages/0.1/messages/"+t+"/"+encodeURIComponent(e)}n.d(e,"c",function(){return i}),n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a}),n.d(e,"d",function(){return s});var r=function(t){return t[t.CHAT_MESSAGE=220]="CHAT_MESSAGE",t[t.ATTACHMENT_SIDEBAR=48]="ATTACHMENT_SIDEBAR",t}({}),a=function(t){return t[t.CHAT_MESSAGE=330]="CHAT_MESSAGE",t[t.ATTACHMENT_SIDEBAR=48]="ATTACHMENT_SIDEBAR",t}({});function s(t,e,n){var i="/api/messages/0.1/messages/"+t+"/"+encodeURIComponent(e)+"/thumbnail?height="+n.height+"&width="+n.width;return n.method?i+"&resizing_method="+n.method:i}},"oA5+":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},qIZ8:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("mrSG"),r=n("tVL2"),a=n("jYNz"),s=n("dzgT"),o=n("VnD/"),c=n("xMyE"),u=function(){function t(t,e,n){var i=this;this.actions$=t,this.auth=e,this.router=n,this.effect$=s.b(this.actions$.pipe(Object(o.a)(r.n)),this.auth.getUserId()).pipe(Object(c.a)(function(t){var e=t[1],n=t[0].payload;"groupchat"===n.type&&"remove"===n.data.action&&n.data.payload.members.includes(Object(r.x)(e))&&i.router.url.startsWith("/messages")&&i.router.navigate(["/messages"])}))}return Object(i.__decorate)([Object(a.b)({dispatch:!1}),Object(i.__metadata)("design:type",Object)],t.prototype,"effect$",void 0),t}()},rKPL:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},rVCp:function(t,e,n){"use strict";var i=n("CcnG"),r=n("c0gq"),a=n("BFOf"),s=n("t9fZ");n.d(e,"a",function(){return o});var o=function(){function t(t,e,n){this.changeDetectorRef=t,this.localStorage=e,this.timeUtils=n,this.FileSelectMode=a.b,this.Feature=r.a,this.sendMessage=new i.EventEmitter,this.typingEvent=new i.EventEmitter,this.focusTypingBox=new i.EventEmitter,this.addAttachment=new i.EventEmitter,this.textValue=""}return t.prototype.ngOnInit=function(){var t=this;this.loadDraftMessage(this.threadIdentifierKey),this.timeUtils.setTimeout(function(){return t.element.adjust()},0)},t.prototype.ngOnChanges=function(t){t.threadIdentifierKey&&this.loadDraftMessage(this.threadIdentifierKey)},t.prototype.handleKeyDownEvent=function(t){var e=this;if((t.key&&"enter"===t.key.toLowerCase()||13===(t.which||t.keyCode||t.charCode))&&!t.shiftKey)return this.sendMessage.emit(this.textValue),this.textValue="",this.timeUtils.setTimeout(function(){return e.element.adjust()},0),!1},t.prototype.handleKeyUpEvent=function(t){this.typingEvent.emit(this.textValue)},t.prototype.focus=function(){this.element.focus()},t.prototype.handlePasteEvent=function(t){var e=this;if(!this.thread.isFake&&t.clipboardData){var n=t.clipboardData.items;Array.from(void 0===n?[]:n).some(function(t){if("file"===t.kind){var n=t.getAsFile();if(n){var i=t.type.split("/")[1],r=new File([n],"image."+i);e.addAttachment.emit(r)}return!0}return!1})}},t.prototype.handleEmojiPicked=function(t){this.textValue?this.textValue+=" "+t:this.textValue=t},t.prototype.onFileSelected=function(t){this.addAttachment.emit(t),this.focusTypingBox.emit(this.thread.id)},t.prototype.loadDraftMessage=function(t){var e=this;this.localStorage.getObservable("webappChatDraftMessages").pipe(Object(s.a)(1)).toPromise().then(function(n){if(void 0===n&&(n={}),t){var i=n[t];e.textValue=i?i.text:""}e.changeDetectorRef.markForCheck()})},t}()},rurT:function(t,e,n){"use strict";var i=n("CcnG"),r=n("rMUQ"),a=n("aK1y"),s=n("c0gq"),o=n("9j+J"),c=n("kGt0"),u=n("I2Cp"),d=n("vUsZ"),l=n("b6KT"),h=n("F/XL"),p=n("K9Ia"),f=n("26FU"),m=n("dzgT"),b=n("p0ib"),g=n("s4kO"),v=n("yGWI"),y=n("67Y/"),j=n("ad02"),O=n("15JJ"),S=n("VnD/"),C=n("/PH2"),w=n("AJqF"),I=n("zQHH"),_=n("aGNc"),E=n("p0Sj"),U=n("xMyE"),x=n("psW0"),T=n("t9fZ"),k=function(t,e){return e===t.projectOwnerId},M=function(t){return"awarded"===t.awardStatus},R=function(t){return"pending"===t.awardStatus},A=function(t,e){return M(t)&&!k(t,e)},D=function(t){return void 0===t.invalidTime&&void 0===t.timeTrackingStopped&&"automatic"===t.invoicePaymentMethod};function L(t,e){if(e)return{name:"project",linkText:e.title,linkUrl:"/projects/"+e.seoUrl,otherUserName:t.displayName,timeSubmitted:e.timeSubmitted}}var $=function(){function t(t,e,n,i,r,a,s,o,c,u,d){this.auth=t,this.thread$=e,this.threadMembers$=n,this.project$=i,this.contest$=r,this.bids$=a,this.milestones$=s,this.milestoneRequests$=o,this.hourlyContracts$=c,this.agentSession$=u,this.team$=d}return t.prototype.getState=function(){return(t=this.auth.authState$,e=P(this.threadMembers$),n=this.thread$.pipe(Object(j.a)()),i=P(this.project$),r=P(this.contest$),a=P(this.bids$),s=P(this.milestones$),o=P(this.milestoneRequests$),c=P(this.hourlyContracts$),u=P(this.agentSession$),d=P(this.team$),m.b(t,e,n,i,r,a,s,o,c,u,d)).pipe(Object(y.a)(function(t){return r=(e=t)[4],a=e[9],o=(i=e[3])&&"hourly"===i.type,[e[0],e[1],n=e[2],(s=i&&("project"===n.context.type&&n.context.id===i.id||a&&"support_session"===n.context.type&&n.context.id===a.sessionId&&"project"===a.sessionSource.type&&a.sessionSource.id===i.id))?i:void 0,"contest"===n.context.type&&r&&n.context.id===r.id?r:void 0,s?e[5]:void 0,s?e[6]:void 0,s?e[7]:void 0,s&&o?e[8]:void 0,a&&"support_session"===n.context.type&&n.context.id===a.sessionId?a:void 0,e[10]];var e,n,i,r,a,s,o}),Object(y.a)(function(t){return function(e){var n=t[0],i=t[1],r=t[2],a=t[3],s=t[4],o=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10];if(r&&n){var f=Number(n.userId),m=function(t,e,n){return n.filter(function(n){return n.bidderId===t||e.length<3&&e.includes(n.bidderId)})[0]}(f,r.members,o||[]),b=i?i.find(function(t){return n&&t.id===f}):void 0,g=i?i.find(function(t){return!(!n||t.id===f)}):void 0,v=function(t,e,n){return n.filter(function(n){return n.bidderId===t||e.length<3&&e.includes(n.bidderId||-1)})}(f,r.members,c||[]),y=function(t,e,n){return n.filter(function(n){return n.bidderId===t||e.length<3&&e.includes(n.bidderId||-1)})}(f,r.members,u||[]);if(g&&!("team"===r.context.type||"team"===r.threadType&&p&&f!==p.ownerUserId)){if(("admin_preferred_chat"===r.threadType||"group"===r.threadType)&&"support_session"===r.context.type&&i&&i.some(l.g))return Object(l.g)(b)?function(t,e,n){return e?{name:"projectAdmin",linkUrl:"/admin/projects/properties.php",linkText:e.title,linkQueryParams:{id:e.id},otherUserName:t.displayName,timeSubmitted:e.timeSubmitted}:!e&&n&&"project"===n.sessionSource.type?{name:"projectAdmin",linkUrl:"/admin/projects/properties.php",linkText:"Deleted project",linkQueryParams:{id:n.sessionSource.id},otherUserName:t.displayName,timeSubmitted:0}:void 0}(g,a,h):L(g,a);if("admin_preferred_chat"===r.threadType&&"support_chat"===r.context.type&&i&&i.some(l.g))return function(t){return{name:"directChat",linkUrl:"",linkText:"",otherUserName:t.displayName}}(g);if(r.threadType&&"group"===r.threadType.toLowerCase())return L(g,a);if(s)return{name:"contest",linkText:s.title,linkUrl:"/"+s.seoUrl,otherUserName:g.displayName,timeSubmitted:s.timeSubmitted};if(a&&"draft"===a.status)return L(g,a);if(a&&a.projectCollaborations&&a.projectCollaborations.length&&(a.projectCollaborations.filter(function(t){return t.userId}).map(function(t){return t.userId}).includes(f)||a.projectCollaborations.filter(function(t){return t.userId}).map(function(t){return t.userId}).includes(g.id)))return L(g,a);if("private_chat"!==r.threadType||a){if("primary"===r.threadType)return{name:"hireme",button:{data:{type:"LINK",buttonUrl:"/u/"+g.username,buttonExtras:{queryParams:{hireme:!0}}},tag:"chatbox-hireme-button"}};if(void 0===m)return L(g,a);if(function(t,e){return!M(t)&&!R(t)&&k(t,e)}(m,f)&&a)return"hourly"===a.type?{name:"projectAwardHourly",linkText:a.title,linkUrl:"/projects/"+a.seoUrl,button:{data:{type:"LINK",buttonUrl:"/projects/"+a.seoUrl,buttonExtras:{queryParams:{awardBid:m.id}}},tag:"chatbox-award-button"},otherUserName:g.displayName,timeSubmitted:a.timeSubmitted}:{name:"projectAwardFixed",linkText:a.title,linkUrl:"/projects/"+a.seoUrl,button:{data:{type:"AWARD_FIXED",bidId:m.id,bidderId:m.bidderId,projectId:a.id},tag:"chatbox-award-button"},otherUserName:g.displayName,timeSubmitted:a.timeSubmitted};if(function(t,e){return!M(t)&&!function(t){return"revoked"===t.awardStatus}(t)&&R(t)&&!k(t,e)}(m,f)){if(a&&a.hireme&&a.isEscrowProject)return{name:"projectAcceptRedirect",linkText:a.title,linkUrl:"/projects/"+a.seoUrl,button:{data:{type:"LINK",buttonUrl:"/projects/"+a.seoUrl},tag:"chatbox-accept-button"},otherUserName:g.displayName,timeSubmitted:a.timeSubmitted};if(a&&"hourly"===a.type)return{name:"projectAcceptHourly",linkText:a.title,linkUrl:"/projects/"+a.seoUrl,button:{data:{type:"ACCEPT",projectId:a.id,bidId:m.id},tag:"chatbox-accept-button"},otherUserName:g.displayName,timeSubmitted:a.timeSubmitted};if(a)return{name:"projectAcceptFixed",linkText:a.title,linkUrl:"/projects/"+a.seoUrl,button:{data:{type:"ACCEPT",projectId:a.id,bidId:m.id},tag:"chatbox-accept-button"},otherUserName:g.displayName,timeSubmitted:a.timeSubmitted}}if((M(m)||R(m))&&k(m,f)&&b){if(a&&d&&d.length&&0===d.filter(D).length)return{name:"setupBilling",linkText:a.title,linkUrl:"/projects/"+a.seoUrl,button:{data:{type:"LINK",buttonUrl:"/projects/"+a.seoUrl},tag:"chatbox-billing-button"},otherUserName:g.displayName,timeSubmitted:a.timeSubmitted};if(a&&a.isEscrowProject)return{name:"milestoneCreateRedirect",linkText:a.title,linkUrl:"/projects/"+a.seoUrl,button:{data:{type:"LINK",buttonUrl:"/projects/"+a.seoUrl},tag:"chatbox-create-milestone-button"},otherUserName:g.displayName,timeSubmitted:a.timeSubmitted};if(a&&y.length>0)return{name:"milestoneCreateFromRequest",linkText:a.title,linkUrl:"/projects/"+a.seoUrl,button:{data:{type:"CREATE_MILESTONE",projectId:a.id,bidderId:m.bidderId,bidId:m.id,employerUsername:b.username,currencyDetails:a.currency},tag:"chatbox-create-milestone-button"},otherUserName:g.displayName,timeSubmitted:a.timeSubmitted};if(0===v.length&&a)return{name:"milestoneCreateInitial",linkText:a.title,linkUrl:"/projects/"+a.seoUrl,button:{data:{type:"CREATE_MILESTONE",projectId:a.id,bidderId:m.bidderId,bidId:m.id,employerUsername:b.username,currencyDetails:a.currency},tag:"chatbox-create-milestone-button"},otherUserName:g.displayName,timeSubmitted:a.timeSubmitted};if(a)return{name:"milestoneCreate",linkText:a.title,linkUrl:"/projects/"+a.seoUrl,button:{data:{type:"CREATE_MILESTONE",projectId:a.id,bidderId:m.bidderId,bidId:m.id,employerUsername:b.username,currencyDetails:a.currency},tag:"chatbox-create-milestone-button"},otherUserName:g.displayName,timeSubmitted:a.timeSubmitted}}return a&&d&&!k(m,f)&&void 0!==m.timeAccepted&&d.filter(D).length>0?{name:"trackTime",linkText:a.title,linkUrl:"/projects/"+a.seoUrl,button:{data:{type:"LINK",buttonUrl:"/projects/"+a.seoUrl,buttonExtras:{fragment:"timetracker-"+m.id+"-invoice-0"}},tag:"chatbox-track-time-button"},otherUserName:g.displayName,timeSubmitted:a.timeSubmitted}:a&&a.isEscrowProject&&A(m,f)?{name:"requestMilestoneRedirect",linkText:a.title,linkUrl:"/projects/"+a.seoUrl,button:{data:{type:"LINK",buttonUrl:"/projects/"+a.seoUrl},tag:"chatbox-request-milestone-button"},otherUserName:g.displayName,timeSubmitted:a.timeSubmitted}:a&&A(m,f)?{name:"requestMilestone",linkText:a.title,linkUrl:"/projects/"+a.seoUrl,button:{data:{type:"REQUEST_MILESTONE",bidId:m.id,projectId:a.id,employerUsername:g.displayName,currencyDetails:a.currency,bidderId:m.bidderId},tag:"chatbox-request-milestone-button"},otherUserName:g.displayName,timeSubmitted:a.timeSubmitted}:L(g,a)}}}}()}),Object(j.a)());var t,e,n,i,r,a,s,o,c,u,d},t}();function P(t){return t.pipe(Object(E.a)(void 0),Object(j.a)())}var F=n("Ssk/");n.d(e,"a",function(){return V});var z,N,B,G=function(){return(G=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};!function(t){t.ARCHIVE_CHAT="archive-chat",t.BLOCK_CHAT="block-chat",t.MUTE_CHAT="mute-chat",t.SEND_MESSAGE="send-message"}(z||(z={})),function(t){t.FORBIDDEN="FORBIDDEN",t.UNKNOWN="UNKNOWN_ERROR",t.MESSAGE_REQUIRED="MESSAGE_REQUIRED"}(N||(N={})),function(t){t.GROUP="group",t.SETTINGS="settings"}(B||(B={}));var V=function(){function t(t,e,n,r,a,u,l,m,b,y,j){this.datastore=t,this.auth=e,this.fileUpload=n,this.webSocketService=r,this.tracking=a,this.modalService=u,this.timeUtils=l,this.userAgent=m,this.featureFlagService=b,this.localStorage=y,this.messagingInboxComponent=j,this.Margin=c.a,this.FontColor=d.a,this.FontWeight=d.e,this.FontSize=d.b,this.Overlay=B,this.TextAlign=d.f,this.BannerAlertType=o.a,this.ChatOperation=z,this.ChatOperationError=N,this.Feature=s.a,this.inboxRedesign$=h.a(!1),this.closeChat=new i.EventEmitter,this.minimiseChat=new i.EventEmitter,this.makingCall=new i.EventEmitter,this.emojiPickedSubject$=new p.a,this.focusClick=new i.EventEmitter,this.chatBoxMode=!0,this.isMinimised=!1,this.lastSentTyping=0,this.projectOverlayClosedSubject$=new f.a(!1),this.messageSendQueue=[],this.messageSendQueueSubject$=new f.a([]),this.messageSend$=this.messageSendQueueSubject$.asObservable().pipe(Object(g.a)(1),Object(v.a)()),this.messageErrorQueue=[],this.messageErrorQueueSubject$=new f.a([]),this.messageError$=this.messageErrorQueueSubject$.asObservable().pipe(Object(g.a)(1),Object(v.a)()),this.defaultLimit=50,this.limitIncreaseStep=50,this.maxLimit=5e3,this.currentLimit=this.defaultLimit,this.messagesLimitSubject$=new f.a(this.defaultLimit),this.XXX_SKILL_ID=88}return t.prototype.ngOnInit=function(){var t=this;this.fileUploadEnabled$=this.featureFlagService.getFlag(s.a.FILEUPLOAD),this.threadIdentifierKey=Object(l.e)(this.attributes.threadIdentifier),this.currentUserId$=this.auth.getUserId(),this.threadId$=this.attributes.thread$.pipe(Object(y.a)(function(t){return t.id}),Object(j.a)()),this.hideSidebar$=h.a(this.isInboxPage()).pipe(Object(O.a)(function(e){return e?t.messagingInboxComponent.messageContacts.contactsSidebarToggle$:h.a(!0)})),this.showInboxHeader$=this.inboxRedesign$.pipe(Object(y.a)(function(e){return e&&!t.chatBoxMode})),this.hideSidebarMobile$=m.b(this.inboxRedesign$,this.hideSidebar$).pipe(Object(y.a)(function(t){return t[0]||t[1]})),this.isGroupChatThread$=this.attributes.thread$.pipe(Object(y.a)(function(t){return"group"===t.threadType||"team"===t.threadType})),this.threadCloseSubscription=m.b(this.attributes.threadCollection.valueChanges(),this.attributes.thread$).subscribe(function(e){0!==e[0].length||e[1].isFake||t.close()}),this.fileUploadSession=this.fileUpload.createSession(),this.files$=this.fileUploadSession.files$,this.uploads$=this.fileUploadSession.uploads$,this.messageAttachmentsSubscription=this.files$.subscribe(function(e){return t.messageAttachments=e}),this.allChatMembers$=this.datastore.objects("threadUsers",this.attributes.thread$.pipe(Object(y.a)(function(t){return t.inactiveMembers.map(function(t){return t.toString()}).concat(t.members.map(function(t){return t.toString()}))}))).pipe(Object(g.a)(1),Object(v.a)(),Object(r.startWithEmptyList)()),this.onlineOfflineStatuses$=this.datastore.objects("onlineOffline",this.attributes.thread$.pipe(Object(y.a)(function(t){return t.members}))),this.members$=m.b(this.allChatMembers$,this.attributes.thread$).pipe(Object(y.a)(function(t){var e=t[1];return t[0].filter(function(t){return e.members.includes(t.id)})})),this.nonGroupChat$=this.members$.pipe(Object(y.a)(function(t){return 2===t.length})),this.currentUser$=m.b(this.members$,this.currentUserId$).pipe(Object(y.a)(function(t){var e=t[1];return t[0].find(function(t){return t.id===Object(r.toNumber)(e)})}),Object(S.a)(r.isDefined)),this.otherMembers$=m.b(this.members$,this.currentUserId$).pipe(Object(y.a)(function(t){var e=t[1];return t[0].filter(function(t){return t.id!==Object(r.toNumber)(e)})})),this.otherUser$=this.otherMembers$.pipe(Object(y.a)(function(t){return t[0]}),Object(S.a)(r.isDefined),Object(y.a)(function(t){return t.id})),this.onlineOffline$=this.datastore.document("onlineOffline",this.otherUser$).valueChanges().pipe(Object(y.a)(function(t){return"online"===t.status})),this.isTyping$=this.webSocketService.fromServerStream$.pipe(Object(C.a)(this.threadId$),Object(y.a)(function(t){var e=t[0];return"OK"!==e.body&&"messages"===e.body.parent_type&&"typing"===e.body.type&&e.body.data.thread===t[1]}),Object(S.a)(function(t){return t}),Object(w.a)(150),Object(I.a)(this.timeUtils.rxTimer(5e3).pipe(Object(_.a)(!1),Object(E.a)(!0))),Object(E.a)(!1)),this.isThreadOwner$=m.b(this.attributes.thread$,this.currentUserId$).pipe(Object(y.a)(function(t){var e=t[0],n=t[1];return!e.isFake&&e.owner===Object(r.toNumber)(n)})),this.isRecruiter$=this.currentUser$.pipe(Object(y.a)(l.g)),this.messagesCollection=this.datastore.collection("messages",function(e){return t.attributes.thread$.pipe(Object(U.a)(function(){t.currentLimit=t.defaultLimit,t.messagesLimitSubject$.next(t.currentLimit)}),Object(S.a)(function(t){return!t.isFake&&t.id>0}),Object(y.a)(function(t){return t.id}),Object(j.a)(),Object(y.a)(function(n){return e.where("threadId","==",n).limit(t.messagesLimitSubject$.asObservable())}))}),this.messagesLoadingMore$=this.messagesCollection.status$.pipe(Object(y.a)(function(t){return!t.ready})),this.canLoadMore$=this.messagesCollection.valueChanges().pipe(Object(y.a)(function(e){return t.currentLimit<t.maxLimit&&e.length>=t.currentLimit})),this.sortedMessages$=m.b(m.b(this.messagesCollection.valueChanges(),this.messageError$,this.threadId$).pipe(Object(y.a)(function(e){var n=e[0],i=e[2],a=e[1].filter(function(t){return t.threadId===i}),s=new Set(n.map(function(t){return t.clientMessageId})),o=Object(r.partition)(a,function(t){return s.has(t.clientMessageId)}),c=o[1];o[0].length>0&&(t.messageErrorQueue=c.slice(),t.messageErrorQueueSubject$.next(t.messageErrorQueue));var u=n.concat(c).sort(function(t,e){return t.timeCreated===e.timeCreated?t.id-e.id:t.timeCreated-e.timeCreated}),d={};return u.reduceRight(function(t,e){var n=JSON.parse(JSON.stringify(e));return n.richMessage&&(d[n.richMessage.category]&&(n.richMessage.disabled=!0),d[n.richMessage.category]=!0),[n].concat(t)},[])})),this.messageSend$).pipe(Object(y.a)(function(t){var e=t[0],n=t[1],i=new Set(e.map(function(t){return t.clientMessageId})),r=n.filter(function(t){return!i.has(t.clientMessageId)});return e.concat(r)})),this.autochatTracking=this.sortedMessages$.subscribe(function(e){var n=e[e.length-1];n&&("autochat"===n.messageSource||n.richMessage&&n.richMessage.category&&n.richMessage.category.startsWith("AUTOCHAT"))&&"project"===t.attributes.threadIdentifier.context.type&&n.fromUser!==Object(r.toNumber)(t.currentUserIdValue)&&t.tracking.track("user_action",{reference:"project_id",reference_id:t.attributes.threadIdentifier.context.id,section:"ProjectViewPage",subsection:"AutoChat",label:"ShowChatBox",name:"user_id",value:n.fromUser})}),this.contacts$=m.b(this.allContacts$,this.attributes.thread$).pipe(Object(y.a)(function(t){var e=t[1];return t[0].filter(function(t){return!e.members.includes(t.id)})}));var e=this.datastore.collection("agentSessions",function(e){return e.where("sessionId","==",t.attributes.thread$.pipe(Object(y.a)(function(t){return t.context}),Object(y.a)(function(t){return t&&"support_session"===t.type?t.id:void 0}),Object(S.a)(r.isDefined)))}).valueChanges().pipe(Object(y.a)(function(t){return t[0]}),Object(S.a)(r.isDefined)),n=b.a(this.attributes.thread$.pipe(Object(y.a)(function(t){return t.context}),Object(y.a)(function(t){return t&&"project"===t.type?t.id:void 0}),Object(S.a)(r.isDefined)),e.pipe(Object(S.a)(function(t){return"project"===t.sessionSource.type}),Object(y.a)(function(t){return t.sessionSource.id})));this.projectDoc=this.datastore.document("threadProjects",n),this.bidsCollection=this.datastore.collection("bids",function(t){return t.where("projectId","==",n)}),this.contestDoc=this.datastore.document("contests",this.attributes.thread$.pipe(Object(y.a)(function(t){return t.context}),Object(S.a)(r.isDefined),Object(S.a)(function(t){return"contest"===t.type}),Object(y.a)(function(t){return"contest"===t.type&&t.id||void 0}),Object(S.a)(r.isDefined)));var i=this.datastore.collection("bids",function(e){return e.where("projectId","==",t.projectDoc.valueChanges().pipe(Object(y.a)(function(t){return t.id})))}),a=m.b(i.valueChanges(),this.attributes.thread$).pipe(Object(y.a)(function(t){var e=t[1];return t[0].map(function(t){return t.bidderId}).filter(function(t){return!e.members.includes(t)}).filter(function(t){return void 0!==t})}),Object(S.a)(function(t){return t.length>0})),o=this.datastore.collection("milestones",function(e){return m.b(t.projectDoc.valueChanges(),t.currentUserId$).pipe(Object(y.a)(function(t){var i=t[1];return t[0].ownerId===Object(r.toNumber)(i)?e.where("projectId","==",n):e.where("projectId","==",n).where("bidderId","==",Object(r.toNumber)(i))}))}),c=this.datastore.collection("milestoneRequests",function(e){return m.b(t.projectDoc.valueChanges(),t.currentUserId$).pipe(Object(y.a)(function(t){var i=t[1];return t[0].ownerId===Object(r.toNumber)(i)?e.where("projectId","==",n):e.where("projectId","==",n).where("bidderId","==",Object(r.toNumber)(i))}))}),u=this.datastore.collection("hourlyContracts",function(e){return e.where("projectId","==",t.projectDoc.valueChanges().pipe(Object(S.a)(r.isDefined),Object(S.a)(function(t){return"hourly"===t.type}),Object(y.a)(function(t){return t.id})))});this.stateManager=new $(this.auth,this.attributes.thread$,this.members$,this.projectDoc.valueChanges(),this.contestDoc.valueChanges(),i.valueChanges(),o.valueChanges(),c.valueChanges(),u.valueChanges(),e,this.team$),this.contextBoxState$=this.stateManager.getState(),this.bidders$=this.datastore.objects("threadUsers",a).pipe(Object(g.a)(1),Object(v.a)(),Object(r.startWithEmptyList)());var d=m.b(this.projectDoc.valueChanges(),this.attributes.thread$).pipe(Object(y.a)(function(t){var e=t[1];return(t[0].projectCollaborations||[]).map(function(t){return t.userId||-1}).filter(function(t){return t>0&&!e.members.includes(t)})}),Object(S.a)(function(t){return t.length>0}));this.collaborators$=this.datastore.objects("threadUsers",d).pipe(Object(g.a)(1),Object(v.a)(),Object(r.startWithEmptyList)());var p=this.bidsCollection.valueChanges().pipe(Object(C.a)(this.currentUserId$,this.otherUser$),Object(y.a)(function(t){var e=t[1],n=t[2];return t[0].find(function(t){return t.bidderId===Object(r.toNumber)(e)||t.bidderId===n})}),Object(S.a)(r.isDefined),Object(y.a)(function(t){return"awarded"===t.awardStatus}),Object(E.a)(!1));this.userIsRecruiter$=this.currentUser$.pipe(Object(y.a)(l.g));var f,x,T,k,M,R,A,D=this.projectDoc.valueChanges().pipe(Object(y.a)(function(e){return!e.jobs.map(function(t){return t.id}).includes(t.XXX_SKILL_ID)}));this.callsEnabled$=(f=p,x=this.nonGroupChat$,T=this.onlineOffline$,k=this.inCall$,M=this.userIsRecruiter$,R=this.attributes.thread$,A=D,m.b(f,x,T,k,M,R,A)).pipe(Object(y.a)(function(e){var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],c=e[6],u="";i?"none"===o.writePrivacy?u="Thread is blocked":n?r?t.isCallSupportedBrowser()?a?u="Already in a call":c||(u="Not allowed for this project"):u="Your browser is unsupported":u="The user is offline":u="Awarded projects only":u="Private chats only";var d=n&&i&&r&&t.isCallSupportedBrowser()&&!a&&"none"!==o.writePrivacy&&c;return{audio:s||("admin_preferred_chat"===o.threadType||!s)&&d,video:s||!s&&"admin_preferred_chat"!==o.threadType&&d,reason:u}}),Object(E.a)({audio:!1,video:!1}),Object(g.a)(1),Object(v.a)()),this.candidatesExist$=m.b(this.contacts$,this.collaborators$,this.bidders$).pipe(Object(y.a)(function(t){return t.some(function(t){return t.length>0})})),this.showOnboardingOverlay$=m.b(this.projectOverlayClosedSubject$,i.valueChanges(),this.currentUserId$,this.attributes.thread$,this.localStorage.getObservable("projectOverlayThreadComplete")).pipe(Object(y.a)(function(e){var n=e[2],i=e[3],a=e[4];return t.chatBoxMode&&!e[0]&&"project"===i.context.type&&"private_chat"===i.threadType&&!(a&&a[i.id])&&void 0!==e[1].find(function(t){return t.bidderId===Object(r.toNumber)(n)})})),this.showAddPeopleOption$=m.b(this.attributes.thread$,this.team$.pipe(Object(E.a)(void 0)),this.isThreadOwner$,this.isRecruiter$,this.candidatesExist$).pipe(Object(y.a)(function(t){var e=t[0];return"none"!==e.context.type&&(!!("team"===e.context.type&&"team_official"!==e.threadType||"team"===e.threadType&&t[1])||"team_official"!==e.threadType&&(t[2]&&t[4]||t[3]))}))},t.prototype.ngOnDestroy=function(){this.autochatTracking.unsubscribe(),this.threadCloseSubscription.unsubscribe(),this.messageAttachmentsSubscription.unsubscribe()},t.prototype.onClick=function(){this.focusChatbox(),this.onboardingOverlay||this.markAsRead(),this.isInboxPage()&&this.messagingInboxComponent.messageContacts.toggleSidebar(!1)},t.prototype.escCloseChat=function(t){var e=this;"Escape"!==t.key||0!==this.attributes.focus&&1!==this.attributes.focus||setTimeout(function(){return e.close()})},t.prototype.passMakingCallState=function(t){this.makingCall.emit(t)},t.prototype.closeOnboardingOverlay=function(){this.projectOverlayClosedSubject$.next(!0)},t.prototype.toggleMinimised=function(){this.minimiseChat.emit(this.attributes.threadIdentifier)},t.prototype.ngAfterViewInit=function(){this.attributes.focus&&this.focusTypingBox()},t.prototype.ngOnChanges=function(t){"attributes"in t&&(this.isMinimised=t.attributes.currentValue.minimised,this.chatBoxMode||this.clearThreadError(),t.attributes.previousValue&&t.attributes.previousValue.threadIdentifier&&t.attributes.previousValue.threadIdentifier===t.attributes.currentValue.threadIdentifier||(this.threadIdentifierKey=Object(l.e)(t.attributes.currentValue.threadIdentifier)))},t.prototype.handleMessageResend=function(t){var e=this.messageErrorQueue.findIndex(function(e){return e.clientMessageId===t.clientMessageId});e>=0&&(this.messageErrorQueue=this.messageErrorQueue.slice(0,e).concat(this.messageErrorQueue.slice(e+1)),this.messageErrorQueueSubject$.next(this.messageErrorQueue),this.enqueueMessage(t.message))},t.prototype.enqueueMessage=function(t){var e=Date.now(),n=this.attributes.threadIdentifier.isFake,i=void 0===t||0===t.trim().length;if(!n){var s=this.attributes.threadIdentifier.id.toString();this.fileUploadSession.send({endpoint:"messages/0.1/threads/"+s+"/messages/",extraParams:{thread_id:s,client_message_id:e.toString()}})}n&&i&&this.messageAttachments.length>0?this.error={code:N.MESSAGE_REQUIRED,operation:z.SEND_MESSAGE}:i||(this.messageSendQueue=this.messageSendQueue.concat([{attachments:[],clientMessageId:e,fromUser:Object(r.toNumber)(this.currentUserIdValue),id:e,message:t,messageSource:"chat_box",threadId:this.attributes.threadIdentifier.id,timeCreated:Date.now(),sendStatus:a.a.SENDING}]),this.messageSendQueueSubject$.next(this.messageSendQueue),1===this.messageSendQueue.length&&this.sendQueuedMessage())},t.prototype.sendQueuedMessage=function(){var t=this;if(0!==this.messageSendQueue.length){var e=this.messageSendQueue[0];this.messageSendQueueSubject$.next(this.messageSendQueue),this.sendMessage(e).then(function(){t.messageSendQueue=t.messageSendQueue.slice(1),t.messageSendQueueSubject$.next(t.messageSendQueue),t.sendQueuedMessage()}).catch(function(n){t.messageErrorQueue=t.messageErrorQueue.concat([G({},e,{timeCreated:Date.now(),sendStatus:a.a.FAILED})]),t.messageErrorQueueSubject$.next(t.messageErrorQueue),t.messageSendQueue=t.messageSendQueue.slice(1),t.messageSendQueueSubject$.next(t.messageSendQueue),t.sendQueuedMessage()})}},t.prototype.sendMessage=function(t){var e=this;return h.a(t).pipe(Object(C.a)(this.auth.getUserId(),this.attributes.thread$),Object(x.a)(function(t){var n=t[0],i=t[1],a=t[2];if(!a.isFake)return e.messagesCollection.push(n).then(function(t){if("success"!==t.status)throw e.error={code:t.errorCode,operation:"send-message"},new Error(t.errorCode);e.error&&e.clearThreadError()});var s=Object(l.c)(a,n.message,Object(r.toNumber)(i));return e.attributes.threadCollection.push(s).then(function(t){if("success"!==t.status)throw e.error={code:t.errorCode,operation:"send-message"},new Error(t.errorCode);return e.error&&e.clearThreadError(),t.id}).then(function(t){e.fileUploadSession.send({endpoint:"messages/0.1/threads/"+t+"/messages/",extraParams:{thread_id:t.toString(),client_message_id:Date.now().toString()}})})})).toPromise()},t.prototype.focusChatbox=function(){this.focusClick.emit(this.attributes.threadIdentifier),this.focusTypingBox()},t.prototype.focusTypingBox=function(){this.isMinimised||!this.typingBox||0!==this.attributes.focus&&1!==this.attributes.focus||this.typingBox.focus()},t.prototype.close=function(){this.closeChat.emit(this.attributes.threadIdentifier)},t.prototype.toggleOverlay=function(t){this.activeOverlay=this.chatBoxMode&&this.activeOverlay!==t?t:void 0},t.prototype.markAsRead=function(){var t=this;h.a(this.attributes.threadIdentifier.isFake).pipe(Object(C.a)(this.attributes.thread$),Object(y.a)(function(e){var n=e[1];return!e[0]&&!n.isRead&&t.attributes.threadCollection.update(n.id,{isRead:!0,messageUnreadCount:0})})).toPromise()},t.prototype.muteChatToggle=function(){var t=this;h.a(this.attributes.threadIdentifier.isFake).pipe(Object(C.a)(this.attributes.thread$),Object(y.a)(function(e){var n=e[1];return!e[0]&&t.attributes.threadCollection.update(n.id,{isMuted:!n.isMuted}).then(function(e){"success"!==e.status&&(t.error={code:e.errorCode,operation:"mute-chat"})})})).toPromise()},t.prototype.blockChatToggle=function(){var t=this;h.a(this.attributes.threadIdentifier.isFake).pipe(Object(C.a)(this.attributes.thread$),Object(y.a)(function(e){var n=e[1];return!e[0]&&t.attributes.threadCollection.update(n.id,{isBlocked:!n.isBlocked}).then(function(e){"success"!==e.status&&(t.error={code:e.errorCode,operation:"block-chat"})})})).toPromise()},t.prototype.archiveChatToggle=function(){var t=this;h.a(this.attributes.threadIdentifier.isFake).pipe(Object(C.a)(this.attributes.thread$),Object(y.a)(function(e){var n=e[1];return!e[0]&&t.attributes.threadCollection.update(n.id,{folder:"inbox"===n.folder?"archived":"inbox"}).then(function(e){"success"!==e.status&&(t.error={code:e.errorCode,operation:"archive-chat"})})})).toPromise()},t.prototype.handleTypingEvent=function(t){this.markAsRead(),!this.attributes.threadIdentifier.isFake&&Date.now()>this.lastSentTyping+5e3&&(this.lastSentTyping=Date.now(),this.attributes.threadCollection.update(this.attributes.threadIdentifier.id,{typing:!0})),this.threadIdentifierKey&&(t&&t.length>0?this.saveDraftMessage(this.threadIdentifierKey,t):this.clearDraftMessage(this.threadIdentifierKey))},t.prototype.clearThreadError=function(){this.error=void 0},t.prototype.modifyMembers=function(t){var e=this;h.a(t).pipe(Object(C.a)(this.attributes.thread$,this.currentUserId$),Object(y.a)(function(n){var i=n[0],a=n[1],s=n[2];if(!a.isFake){var o="add"===i.action?a.members.concat(i.userIds):a.members.filter(function(t){return!i.userIds.includes(t)}),c=o.filter(function(t){return t!==Object(r.toNumber)(s)}),u="add"===i.action?a.inactiveMembers.filter(function(t){return!i.userIds.includes(t)}):a.inactiveMembers.concat(i.userIds);return e.attributes.threadCollection.update(a.id,{inactiveMembers:u,members:o,otherMembers:c}).then(function(n){"success"===n.status&&"remove"===t.action&&t.userIds.includes(Object(r.toNumber)(s))&&e.close()})}})).toPromise()},t.prototype.handleUserRemoved=function(t){this.modifyMembers({action:"remove",userIds:[t.id]})},t.prototype.popManagementModal=function(){var t=this;this.modalService.open(F.a,{inputs:{bidders$:this.bidders$,contacts$:this.contacts$,collaborators$:this.collaborators$,onlineOfflineStatuses$:this.onlineOfflineStatuses$,isRecruiter$:this.isRecruiter$,thread$:this.attributes.thread$,team$:this.team$},size:u.a.SMALL}).afterClosed().toPromise().then(function(e){e&&e instanceof Array&&e.length>0&&t.modifyMembers({action:"add",userIds:e})})},t.prototype.isCallSupportedBrowser=function(){var t=this.userAgent.getUserAgent().getBrowser().name;return"Chrome"===t||"Firefox"===t},t.prototype.handleAddAttachment=function(t){this.fileUploadSession.addFile(t),this.focusChatbox()},t.prototype.handleRemoveAttachment=function(t){this.fileUploadSession.removeFile(t.name)},t.prototype.handleRemoveUpload=function(t){this.fileUploadSession.removeUpload(t)},t.prototype.handleLoadMessages=function(){this.currentLimit=Math.min(this.currentLimit+this.limitIncreaseStep,this.maxLimit),this.messagesLimitSubject$.next(this.currentLimit)},t.prototype.handleChatOptionsDrawerToggle=function(t){t?this.chatOptionsDrawer.open():this.chatOptionsDrawer.close()},t.prototype.handleContactsDrawerToggle=function(t){t&&this.isInboxPage()?this.messagingInboxComponent.contactsDrawer.open():!t&&this.isInboxPage()&&this.messagingInboxComponent.contactsDrawer.close()},t.prototype.isInboxPage=function(){return!this.chatBoxMode&&!!this.messagingInboxComponent},t.prototype.saveDraftMessage=function(t,e){var n=this,i={text:e,lastUpdated:Date.now()};this.localStorage.getObservable("webappChatDraftMessages").pipe(Object(T.a)(1)).toPromise().then(function(e){void 0===e&&(e={}),t&&(e[t]=i,n.localStorage.set("webappChatDraftMessages",e))})},t.prototype.clearDraftMessage=function(t){var e=this;this.localStorage.getObservable("webappChatDraftMessages").pipe(Object(T.a)(1)).toPromise().then(function(n){n&&t&&(delete n[t],e.localStorage.set("webappChatDraftMessages",n))})},t}()},s5L8:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("tVL2"),r=n("f3Ik");function a(t,e){switch(void 0===t&&(t={}),e.type){case"API_FETCH_SUCCESS":if("contests"===e.payload.type){var n=e.payload,a=n.ref,s=n.order;return(u=n.result).contests?Object(i.q)(t,Object(i.y)(u.contests,r.a),s,a):t}if("threads"===e.payload.type){var o=e.payload.result.context_details;return o&&o.contests?(a=e.payload.ref,Object(i.r)(t,Object(i.y)(o.contests,r.a),{path:{collection:"contests",authUid:a.path.authUid}})):t}return t;case"API_PUSH_SUCCESS":if("contests"===e.payload.type){var c=e.payload,u=(a=c.ref,c.result);return Object(i.r)(t,Object(i.y)([u],r.a),a)}return t;default:return t}}},"sjB/":function(t,e,n){"use strict";var i=n("tVL2");function r(t){if(!(t.id&&t.project_id&&t.bid_id&&t.billing_cycle&&t.invoice_payment_method))throw new ReferenceError("Missing a required hourly contract field.");if("weekly"!==t.billing_cycle&&"monthly"!==t.billing_cycle)throw new ReferenceError("Billing Cycle must be monthly or weekly");return{id:t.id,projectId:t.project_id,bidId:t.bid_id,defaultHourlyRate:t.default_hourly_rate,defaultWorkLimit:t.default_work_limit,billingCycle:t.billing_cycle,invoicePaymentMethod:t.invoice_payment_method,currentHourlyRate:t.current_hourly_rate,currentWorkLimit:t.current_work_limit,timezone:t.timezone,bidderId:t.bidder_id,projectOwnerId:t.project_owner_id,invalidTime:t.invalid_time?1e3*t.invalid_time:void 0,timeTrackingStopped:t.time_tracking_stopped?1e3*t.time_tracking_stopped:void 0,invoiceId:t.invoice_id,active:!t.invalid_time}}function a(t,e){switch(void 0===t&&(t={}),e.type){case"API_FETCH_SUCCESS":if("hourlyContracts"===e.payload.type){var n=e.payload,a=n.result,s=n.ref,o=n.order;return Object(i.q)(t,Object(i.y)(a.hourly_contracts,r),o,s)}return t;case"API_UPDATE_SUCCESS":if(a=e.payload.result,("bids"===e.payload.type||"projectViewBids"===e.payload.type)&&a&&"hourly_contract"in a&&a.hourly_contract)return s={path:{collection:"hourlyContracts",authUid:e.payload.ref.path.authUid}},Object(i.r)(t,Object(i.y)([a.hourly_contract],r),s);if("hourlyContracts"===e.payload.type){var c=e.payload,u=c.result;return s=c.ref,Object(i.r)(t,Object(i.y)([u],r),s)}return t;default:return t}}n.d(e,"a",function(){return a})},suOD:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("tVL2");function r(){return{defaultOrder:{field:"timeSubmitted",direction:i.c.DESC},fetch:function(t,e){return{endpoint:"projects/0.1/projects",params:{job_details:"true",user_details:"true",user_avatar:"true",user_support_status_details:"true",user_online_offline_details:"true",projects:e||[]}}}}}},vwlU:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},wWty:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var i=n("x0dZ"),r=n("vYTZ"),a=n("5I7X"),s=n("kGt0"),o=n("vUsZ"),c=n("S5bw"),u=n("dzgT"),d=n("67Y/"),l=n("ad02"),h=function(){function t(t){this.datastore=t,this.CardBorderRadius=i.a,this.CardSize=i.c,this.FontColor=o.a,this.FontWeight=o.e,this.IconSize=r.d,this.IconColor=r.c,this.LinkColor=a.a,this.LinkHoverColor=a.b,this.LinkWeight=a.e,this.Margin=s.a,this.jobId$=new c.a(1)}return t.prototype.ngOnInit=function(){var t=this;if("share_project"===this.type){var e=this.datastore.document("threadProjects",this.jobId$),n=e.valueChanges();this.job$=n;var i=e.status$.pipe(Object(d.a)(function(t){return t.ready&&!t.error}),Object(l.a)());this.isJobActive$=u.b(n,i).pipe(Object(d.a)(function(t){return!t[0].deleted&&t[1]}))}else{var r=this.datastore.document("contests",this.jobId$),a=r.valueChanges();this.job$=a,i=r.status$.pipe(Object(d.a)(function(t){return t.ready&&!t.error}),Object(l.a)()),this.isJobActive$=u.b(a,i).pipe(Object(d.a)(function(t){return t[0]&&t[1]}))}this.jobLink$=this.job$.pipe(Object(d.a)(function(e){return"share_project"===t.type?"/projects/"+e.seoUrl:"/"+e.seoUrl}))},t.prototype.ngOnChanges=function(t){"jobId"in t&&this.jobId$.next(t.jobId.currentValue)},t}()},wfiQ:function(t,e,n){"use strict";function i(){return{search:function(t){return{endpoint:"messages/0.1/threads/search",params:t}}}}n.d(e,"a",function(){return i})},wlhS:function(t,e,n){"use strict";var i=n("tVL2");function r(t){if(!t.id||!t.owner_user_id||!t.members||!t.name||t.members.find(function(t){return void 0===t.user_id}))throw new ReferenceError("Missing a required team field.");return{id:t.id,ownerUserId:t.owner_user_id,members:t.members.map(function(t){return t.user_id}).filter(i.l),name:t.name}}function a(t,e){switch(void 0===t&&(t={}),e.type){case"API_FETCH_SUCCESS":if("teams"===e.payload.type){var n=e.payload,a=n.result,s=n.ref,o=n.order;return a.teams?Object(i.q)(t,Object(i.y)(a.teams,r),o,s):t}return t;default:return t}}n.d(e,"a",function(){return a})},xU4L:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("CcnG"),r=n("aa9U"),a=function(){function t(){this.ButtonColor=r.a,this.confirm=new i.EventEmitter,this.cancel=new i.EventEmitter}return t.prototype.handleBackButton=function(){this.cancel.emit()},t.prototype.handleConfirmButton=function(){this.confirm.emit()},t}()},yeKy:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("CcnG"),r=n("ZYCi"),a=function(){function t(t){this.router=t}return t.prototype.startChat=function(t){var e=t.userIds,n=t.threadType,i=t.context,r=t.threadId,a=t.focus,s=t.doNotRedirect,o=void 0!==s&&s;if(this.liveChatHandler)this.liveChatHandler({userIds:e,threadType:n,origin:t.origin,context:i,threadId:r,focus:void 0===a||a});else{if(o)return;if(r)this.router.navigateByUrl("/messages/thread/"+r);else{var c=new URL(window.location.origin+"/messages/new"),u=c.searchParams;u.append("thread_type",n),i&&(u.append("context_type",i.type),"none"!==i.type&&u.append("context_id",i.id.toString())),e.forEach(function(t){u.append("members",t.toString())}),this.router.navigateByUrl(""+c.pathname+c.search)}}},t.prototype.registerLiveChat=function(t){this.liveChatHandler=t},t.ngInjectableDef=i.defineInjectable({factory:function(){return new t(i.inject(r.n))},token:t,providedIn:"root"}),t}()},yz6E:function(t,e,n){"use strict";var i=n("tVL2"),r=n("zEgj"),a=function(){return(a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function s(t){var e=t.relationships?Object.values(t.relationships).filter(i.l).map(function(t){return t.weight}).filter(i.l):[];return a({},Object(r.a)(t.user),{maxWeight:Math.max.apply(Math,[0].concat(e))})}function o(t,e){switch(void 0===t&&(t={}),e.type){case"API_FETCH_SUCCESS":if("contacts"===e.payload.type){var n=e.payload,r=n.result,a=n.ref,o=n.order;return Object(i.q)(t,Object(i.y)(r.contacts,s,a.path.authUid),o,a)}return t;default:return t}}n.d(e,"a",function(){return o})}}]);
//# sourceMappingURL=default~app-contests-contest-award-modal-contest-award-modal-module-ngfactory~app-contests-contest-v~ca0582fa.fd6e118e8f23a18ac14f.js.map